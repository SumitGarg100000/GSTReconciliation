<!DOCTYPE html>
<html>
<head><title>Protected Content</title></head>
<body>
    <script>
        // Ye line code ko decode karke screen par dikhayegi
        document.open();
        document.write(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+R1NUIFJlY29uY2lsaWF0aW9uIFRvb2wgLSBQcm9mZXNzaW9uYWwgRWRpdGlvbjwvdGl0bGU+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdGFpbHdpbmRjc3NAMi4yLjE5L2Rpc3QvdGFpbHdpbmQubWluLmNzcyI+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWVANi4wLjAvY3NzL2FsbC5taW4uY3NzIj4KIDxzdHlsZT4KICAgICAKICAvKiBzdHlsZXMuY3NzICovCiogewogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBmb250LWZhbWlseTogJ1BvcHBpbnMnLCAnU2Vnb2UgVUknLCBBcmlhbCwgc2Fucy1zZXJpZjsKfQoKOnJvb3QgewogICAgLS1wcmltYXJ5LWNvbG9yOiAjMWE3M2U4OwogICAgLS1wcmltYXJ5LWRhcms6ICMwZDQ3YTE7CiAgICAtLXRleHQtcHJpbWFyeTogIzMzMzMzMzsKICAgIC0tdGV4dC1zZWNvbmRhcnk6ICM2NjY2NjY7CiAgICAtLWJnLWdyYWRpZW50LTE6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmNWY3ZmEsICNlNGYxZmYpOwp9Cgpib2R5IHsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWdyYWRpZW50LTEpOwogICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICBwYWRkaW5nOiAyMHB4OwogICAgbGluZS1oZWlnaHQ6IDEuNjsKfQoKLyogQ29udGFpbmVyICovCi5jb250YWluZXIgewogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgd2lkdGg6IDk4JTsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgYm94LXNoYWRvdzogMCA4cHggMjBweCByZ2JhKDAsIDYxLCAxMTUsIDAuMSk7CiAgICBtaW4taGVpZ2h0OiBjYWxjKDgwdmggLSA0MHB4KTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgouY29udGFpbmVyOjpiZWZvcmUgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDhweDsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMxYTczZTgsICMwZDQ3YTEpOwp9CgovKiBJbnN0cnVjdGlvbnMgQ29udGFpbmVyIChTdHlsZWQgdG8gbWF0Y2ggZXhwbGFuYXRpb24gc2VjdGlvbikgKi8KLmluc3RydWN0aW9ucy1jb250YWluZXIgewogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmOWZmOwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjZTBmZjsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMzAwcHgpOwp9CgouaW5zdHJ1Y3Rpb25zLWNvbnRhaW5lciBoMiwgLmluc3RydWN0aW9ucy1jb250YWluZXIgaDMgewogICAgY29sb3I6ICMwZTQzNzc7CiAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIHBhZGRpbmc6IDA7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9CgouaW5zdHJ1Y3Rpb25zLWNvbnRhaW5lciB1bCwgLmluc3RydWN0aW9ucy1jb250YWluZXIgb2wgewogICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9CgouaW5zdHJ1Y3Rpb25zLWNvbnRhaW5lciBsaSB7CiAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICBjb2xvcjogIzMzMzsKfQoKLmluc3RydWN0aW9ucy1jb250YWluZXIgcCB7CiAgICBsaW5lLWhlaWdodDogMS42OwogICAgY29sb3I6ICMzMzM7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9CgovKiBXaGF0c0FwcCBCdXR0b24gKi8KLndoYXRzYXBwLWJ0biB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB6LWluZGV4OiAxMDAwOwogICAgYm90dG9tOiAyMHB4OwogICAgcmlnaHQ6IDIwcHg7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTQ1ZGVnLCAjMjVkMzY2LCAjMTI4QzdFKTsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHdpZHRoOiA3MHB4OwogICAgaGVpZ2h0OiA3MHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIGJveC1zaGFkb3c6IDAgMCAyMHB4IDEwcHggcmdiYSgzNywgMjExLCAxMDIsIDAuMSk7CiAgICBhbmltYXRpb246IGdsb3cgM3MgaW5maW5pdGU7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwp9Cgoud2hhdHNhcHAtYnRuOmhvdmVyIHsKICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgIGFuaW1hdGlvbi1wbGF5LXN0YXRlOiBwYXVzZWQ7Cn0KCi53aGF0c2FwcC1idG4gaSB7CiAgICBmb250LXNpemU6IDM2cHg7Cn0KCi8qIEZvb3RlciAqLwpmb290ZXIgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzBlNDM3NywgIzFhNWZiNCk7CiAgICBjb2xvcjogI2ZmZmZmZjsKICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICBtYXJnaW4tdG9wOiAzMHB4OwogICAgYm94LXNoYWRvdzogMCAtNHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKfQoKLmZvb3Rlci1jb250ZW50IHsKICAgIG1heC13aWR0aDogMTIwMHB4OwogICAgbWFyZ2luOiAwIGF1dG87CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5mb290ZXItbGlua3MgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZ2FwOiAycmVtOwogICAgbWFyZ2luOiAxcmVtIDA7CiAgICBmbGV4LXdyYXA6IHdyYXA7Cn0KCi5mb290ZXItbGlua3MgYSB7CiAgICBjb2xvcjogI2ZmZmZmZjsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIG9wYWNpdHk6IDAuOTsKICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlOwogICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7Cn0KCi5mb290ZXItbGlua3MgYTpob3ZlciB7CiAgICBvcGFjaXR5OiAxOwogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7Cn0KCi8qIEFuaW1hdGlvbiBmb3IgV2hhdHNBcHAgQnV0dG9uIEdsb3cgKi8KQGtleWZyYW1lcyBnbG93IHsKICAgIDAlIHsgYm94LXNoYWRvdzogMCAwIDIwcHggMHB4IHJnYmEoMjYsIDExNSwgMjMyLCAwLjIpOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICA1MCUgeyBib3gtc2hhZG93OiAwIDAgNDBweCAyMHB4IHJnYmEoMjYsIDExNSwgMjMyLCAwLjEpOyB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOyB9CiAgICAxMDAlIHsgYm94LXNoYWRvdzogMCAwIDIwcHggMHB4IHJnYmEoMjYsIDExNSwgMjMyLCAwLjIpOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9Cn0KCi8qIEhlYWRlciBOYXZpZ2F0aW9uICovCi5oZWFkZXItbmF2IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgIHBhZGRpbmc6IDEwcHggMDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9CgoubG9nbyB7CiAgICBmb250LXNpemU6IDEuOHJlbTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1kYXJrKTsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgoubG9nbyBpIHsKICAgIG1hcmdpbi1yaWdodDogMTBweDsKICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsKfQoKLm5hdi1saW5rcyB7CiAgICBkaXNwbGF5OiBmbGV4Owp9CgoubmF2LWxpbmtzIGEgewogICAgbWFyZ2luLWxlZnQ6IDI1cHg7CiAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5uYXYtbGlua3MgYTpob3ZlciB7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7Cn0KCi5uYXYtbGlua3MgYTo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3R0b206IC01cHg7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDA7CiAgICBoZWlnaHQ6IDJweDsKICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktY29sb3IpOwogICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlOwp9CgoubmF2LWxpbmtzIGE6aG92ZXI6OmFmdGVyIHsKICAgIHdpZHRoOiAxMDAlOwp9CgoubW9iaWxlLW1lbnUtYnRuIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgYm9yZGVyOiBub25lOwogICAgZm9udC1zaXplOiAxLjVyZW07CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1kYXJrKTsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLyogTG9naW4gU2VjdGlvbiAqLwojbG9naW4tc2VjdGlvbiB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGhlaWdodDogMTAwJTsKfQoKaDEgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6ICMwZTQzNzc7CiAgICBmb250LXNpemU6IDIuNWVtOwogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KCmgyIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGNvbG9yOiAjMWE1ZmI0OwogICAgZm9udC1zaXplOiAxLjhlbTsKICAgIG1hcmdpbjogMjBweCAwOwogICAgcGFkZGluZzogMTBweDsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2U2ZjNmZiwgI2YwZjhmZik7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7Cn0KCi8qIENvbnRyb2wgUGFuZWwgKi8KLmNvbnRyb2wtcGFuZWwgewogICAgYmFja2dyb3VuZDogI2Y1ZjlmZjsKICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICBwYWRkaW5nOiAyMHB4OwogICAgbWFyZ2luOiAyMHB4IDA7CiAgICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwgNjEsIDExNSwgMC4wNSk7Cn0KCi8qIE9wdGlvbnMgQ29udGFpbmVyICovCi5vcHRpb25zLWNvbnRhaW5lciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwogICAgZ2FwOiAyMHB4OwogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIHBhZGRpbmc6IDE1cHg7CiAgICBiYWNrZ3JvdW5kOiAjZTZmM2ZmOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2UwZmY7Cn0KCi5vcHRpb24tZ3JvdXAgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBnYXA6IDEwcHg7Cn0KCi8qIEJ1dHRvbiBDb250YWluZXIgKi8KLmJ1dHRvbi1jb250YWluZXIgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZ2FwOiAxNXB4OwogICAgbWFyZ2luOiAyMHB4IDA7Cn0KCmJ1dHRvbiB7CiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGdhcDogOHB4OwogICAgcGFkZGluZzogMTJweCAyNXB4OwogICAgYm9yZGVyOiBub25lOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAxLjFlbTsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQoKYnV0dG9uOmhvdmVyIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsKICAgIGJveC1zaGFkb3c6IDAgNnB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTsKfQoKYnV0dG9uOmFjdGl2ZSB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTsKfQoKI3JlY29uY2lsZS1idG4gewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzFhNzNlOCwgIzBkNDdhMSk7CiAgICBjb2xvcjogd2hpdGU7Cn0KCiNyZWNvbmNpbGUtYnRuOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMwZDQ3YTEsICMxYTczZTgpOwp9CgojcmVzZXQtYnRuIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICNlNTM5MzUsICNjNjI4MjgpOwogICAgY29sb3I6IHdoaXRlOwp9CgojcmVzZXQtYnRuOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICNjNjI4MjgsICNlNTM5MzUpOwp9CgojZG93bmxvYWQtc2FtcGxlIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMyZTdkMzIsICMxYjVlMjApOwogICAgY29sb3I6IHdoaXRlOwp9CgojZG93bmxvYWQtc2FtcGxlOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMxYjVlMjAsICMyZTdkMzIpOwp9CgovKiBVcGxvYWQgU2VjdGlvbiAqLwoudXBsb2FkLXNlY3Rpb24gewogICAgYmFja2dyb3VuZDogI2YwZjhmZjsKICAgIHBhZGRpbmc6IDE1cHg7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgYm9yZGVyOiAxcHggZGFzaGVkICMxYTczZTg7CiAgICBtYXJnaW46IDIwcHggMDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7Cn0KCi51cGxvYWQtc2VjdGlvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiAjZTZmM2ZmOwogICAgYm9yZGVyLWNvbG9yOiAjMGQ0N2ExOwp9CgppbnB1dFt0eXBlPSJmaWxlIl0gewogICAgcGFkZGluZzogMTBweDsKICAgIGJvcmRlcjogMnB4IHNvbGlkICMxYTczZTg7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBiYWNrZ3JvdW5kOiAjZjVmOWZmOwogICAgd2lkdGg6IDEwMCU7CiAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zczsKfQoKaW5wdXRbdHlwZT0iZmlsZSJdOmhvdmVyIHsKICAgIGJvcmRlci1jb2xvcjogIzBkNDdhMTsKfQoKaW5wdXRbdHlwZT0ibnVtYmVyIl0sIGlucHV0W3R5cGU9ImNoZWNrYm94Il0sIGlucHV0W3R5cGU9InRleHQiXSwgaW5wdXRbdHlwZT0icGFzc3dvcmQiXSB7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgYm9yZGVyOiAycHggc29saWQgIzFhNzNlODsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIGJhY2tncm91bmQ6ICNmNWY5ZmY7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwp9CgppbnB1dFt0eXBlPSJudW1iZXIiXTpmb2N1cywgaW5wdXRbdHlwZT0idGV4dCJdOmZvY3VzLCBpbnB1dFt0eXBlPSJwYXNzd29yZCJdOmZvY3VzIHsKICAgIGJvcmRlci1jb2xvcjogIzBkNDdhMTsKICAgIG91dGxpbmU6IG5vbmU7CiAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgyNiwgMTE1LCAyMzIsIDAuMik7Cn0KCi8qIENoZWNrYm94IEdyb3VwICovCi5jaGVja2JveC1ncm91cCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGdhcDogMTBweDsKfQoKaW5wdXRbdHlwZT0iY2hlY2tib3giXSB7CiAgICB3aWR0aDogMThweDsKICAgIGhlaWdodDogMThweDsKICAgIGFjY2VudC1jb2xvcjogIzFhNzNlODsKfQoKbGFiZWwgewogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGNvbG9yOiAjMGU0Mzc3Owp9CgovKiBEYXRhIENvbnRhaW5lciAqLwouZGF0YS1jb250YWluZXIgewogICAgbWFyZ2luOiAzMHB4IDA7Cn0KCi8qIFRhYmxlIENvbnRhaW5lciAqLwoudGFibGUtY29udGFpbmVyIHsKICAgIG92ZXJmbG93LXg6IGF1dG87CiAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgbWF4LWhlaWdodDogODAwcHg7CiAgICBtYXJnaW46IDE1cHggMDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2UwZmY7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBwYWRkaW5nOiA1cHg7CiAgICBiYWNrZ3JvdW5kOiAjZjVmOWZmOwogICAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9Cgp0YWJsZSB7CiAgICB3aWR0aDogMTAwJTsKICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICBmb250LXNpemU6IDE0cHg7Cn0KCnRhYmxlIHRoZWFkIHRoIHsKICAgIHBvc2l0aW9uOiBzdGlja3k7CiAgICB0b3A6IDA7CiAgICBiYWNrZ3JvdW5kOiAjMWE3M2U4OwogICAgY29sb3I6IHdoaXRlOwogICAgei1pbmRleDogMTA7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzBkNDdhMTsKICAgIHBhZGRpbmc6IDEycHg7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9Cgp0aCB7CiAgICBiYWNrZ3JvdW5kOiAjMWE3M2U4OwogICAgY29sb3I6IHdoaXRlOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICBwYWRkaW5nOiAxMnB4OwogICAgdGV4dC1hbGlnbjogbGVmdDsKfQoKdGQgewogICAgYm9yZGVyOiAxcHggc29saWQgI2NjZTBmZjsKICAgIHBhZGRpbmc6IDEwcHg7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgovKiBUb29sIGFuZCBMb2dpbiBTZWN0aW9uICovCiN0b29sLXNlY3Rpb24gewogICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTsKfQoKI2xvZ2luLXNlY3Rpb24uaGlkZGVuLCAjdG9vbC1zZWN0aW9uLmhpZGRlbiB7CiAgICBkaXNwbGF5OiBub25lOwp9CgovKiBFcnJvciBhbmQgRXhwaXJ5IE1lc3NhZ2VzICovCiNlcnJvciB7CiAgICBjb2xvcjogI2U1MzkzNTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBmb250LXdlaWdodDogNjAwOwp9CgojZXhwaXJ5LW1lc3NhZ2UgewogICAgZm9udC1zaXplOiAxLjJlbTsKICAgIG1hcmdpbjogMTBweCAwOwogICAgcGFkZGluZzogMTBweDsKICAgIGJhY2tncm91bmQ6ICNmZmViZWU7CiAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNlNTM5MzU7CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgZWFzZTsKICAgIGNvbG9yOiAjZTUzOTM1Owp9CgovKiBEb3dubG9hZCBPdXRwdXQgTGluayAqLwphI2Rvd25sb2FkLW91dHB1dCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGdhcDogOHB4OwogICAgcGFkZGluZzogMTJweCAyNXB4OwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzFhNzNlOCwgIzBkNDdhMSk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBib3JkZXI6IG5vbmU7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmb250LXNpemU6IDEuMWVtOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgICBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgbWFyZ2luOiAyMHB4IGF1dG87CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCmEjZG93bmxvYWQtb3V0cHV0OmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMwZDQ3YTEsICMxYTczZTgpOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwogICAgYm94LXNoYWRvdzogMCA2cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwp9CgovKiBGaWx0ZXIgRHJvcGRvd24gKi8KLmZpbHRlci1kcm9wZG93biB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5maWx0ZXItYnRuIHsKICAgIGJhY2tncm91bmQ6IG5vbmU7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAwOwogICAgbWFyZ2luLWxlZnQ6IDVweDsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5maWx0ZXItZHJvcGRvd24tY29udGVudCB7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgIG1pbi13aWR0aDogMjAwcHg7CiAgICBtYXgtaGVpZ2h0OiAzMDBweDsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NlMGZmOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIHotaW5kZXg6IDIwOwogICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOwp9CgouZmlsdGVyLWRyb3Bkb3duLWNvbnRlbnQuc2hvdyB7CiAgICBkaXNwbGF5OiBibG9jazsKfQoKLmZpbHRlci1pbnB1dCB7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDhweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2UwZmY7CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogNDAwOwp9CgouZmlsdGVyLW9wdGlvbiB7CiAgICBwYWRkaW5nOiA4cHggMTBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiA4cHg7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgY29sb3I6ICMzMzM7Cn0KCi5maWx0ZXItb3B0aW9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGY4ZmY7Cn0KCi5maWx0ZXItb3B0aW9uIGlucHV0W3R5cGU9ImNoZWNrYm94Il0gewogICAgd2lkdGg6IDE2cHg7CiAgICBoZWlnaHQ6IDE2cHg7CiAgICBhY2NlbnQtY29sb3I6ICMxYTczZTg7Cn0KCi5maWx0ZXItb3B0aW9uIGxhYmVsIHsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBjb2xvcjogIzMzMzsKfQoKLmZpbHRlci1hY3Rpb25zIHsKICAgIHBhZGRpbmc6IDhweDsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NlMGZmOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLmZpbHRlci1hY3Rpb25zIGJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiAjMWE3M2U4OwogICAgY29sb3I6IHdoaXRlOwogICAgYm9yZGVyOiBub25lOwogICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICBtYXJnaW46IDAgMnB4OwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3MgZWFzZTsKfQoKLmZpbHRlci1hY3Rpb25zIGJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiAjMGQ0N2ExOwogICAgdHJhbnNmb3JtOiBub25lOwp9Cgouc29ydC1hY3Rpb25zIHsKICAgIHBhZGRpbmc6IDhweDsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NlMGZmOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLnNvcnQtYWN0aW9ucyBidXR0b24gewogICAgYmFja2dyb3VuZDogIzFhNzNlODsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlcjogbm9uZTsKICAgIHBhZGRpbmc6IDVweCAxMHB4OwogICAgbWFyZ2luOiAwIDJweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjNzIGVhc2U7Cn0KCi5zb3J0LWFjdGlvbnMgYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6ICMwZDQ3YTE7CiAgICB0cmFuc2Zvcm06IG5vbmU7Cn0KCi8qIEN1c3RvbSBTZWxlY3QgKi8KLmN1c3RvbS1zZWxlY3QgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWluLXdpZHRoOiAxNTBweDsKICAgIG1hcmdpbjogMCAxMHB4Owp9CgouY3VzdG9tLXNlbGVjdCBzZWxlY3QgewogICAgYXBwZWFyYW5jZTogbm9uZTsKICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgIHdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogMTBweCAxNXB4OwogICAgYm9yZGVyOiAycHggc29saWQgIzFhNzNlODsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY5ZmY7CiAgICBjb2xvcjogIzBlNDM3NzsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwp9CgouY3VzdG9tLXNlbGVjdCBzZWxlY3Q6aG92ZXIgewogICAgYm9yZGVyLWNvbG9yOiAjMGQ0N2ExOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2U2ZjNmZjsKfQoKLmN1c3RvbS1zZWxlY3Qgc2VsZWN0OmZvY3VzIHsKICAgIG91dGxpbmU6IG5vbmU7CiAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgyNiwgMTE1LCAyMzIsIDAuMik7Cn0KCi5jdXN0b20tc2VsZWN0OjphZnRlciB7CiAgICBjb250ZW50OiAiXDI1QkMiOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiA1MCU7CiAgICByaWdodDogMTVweDsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgIGNvbG9yOiAjMWE3M2U4OwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi8qIFByb2dyZXNzIEJhciAqLwoucHJvZ3Jlc3MtY29udGFpbmVyIHsKICAgIG1hcmdpbjogMjBweCAwOwogICAgcGFkZGluZzogMTVweDsKICAgIGJhY2tncm91bmQ6ICNmMGY4ZmY7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjZTBmZjsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCi5wcm9ncmVzcy1iYXIgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDIwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBtYXJnaW46IDEwcHggMDsKfQoKLnByb2dyZXNzLWZpbGwgewogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMWE3M2U4LCAjMGQ0N2ExKTsKICAgIHdpZHRoOiAwJTsKICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KCi5wcm9ncmVzcy10ZXh0IHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjb2xvcjogIzBlNDM3NzsKICAgIG1hcmdpbjogNXB4IDA7Cn0KCi8qIE1lbW9yeSBPcHRpb24gKi8KLm1lbW9yeS1vcHRpb24gewogICAgYmFja2dyb3VuZDogI2ZmZjNjZDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBwYWRkaW5nOiAxNXB4OwogICAgbWFyZ2luOiAxNXB4IDA7Cn0KCi5tZW1vcnktb3B0aW9uIGxhYmVsIHsKICAgIGNvbG9yOiAjODU2NDA0OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKfQoKLm1lbW9yeS1vcHRpb24gLmRlc2NyaXB0aW9uIHsKICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICBjb2xvcjogIzg1NjQwNDsKICAgIG1hcmdpbi10b3A6IDVweDsKfQoKLyogRXhwbGFuYXRpb24gU2VjdGlvbiAqLwouZXhwbGFuYXRpb24gewogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmOWZmOwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjZTBmZjsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMzAwcHgpOwp9CgouZXhwbGFuYXRpb24gaDIsIC5leHBsYW5hdGlvbiBoMyB7CiAgICBjb2xvcjogIzBlNDM3NzsKICAgIGJhY2tncm91bmQ6IG5vbmU7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgcGFkZGluZzogMDsKfQoKLmV4cGxhbmF0aW9uIHVsLCAuZXhwbGFuYXRpb24gb2wgewogICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9CgouZXhwbGFuYXRpb24gbGkgewogICAgbWFyZ2luLWJvdHRvbTogNXB4Owp9CgoueW91dHViZS1saW5rIHsKICAgIGNvbG9yOiAjMWE3M2U4OwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKfQoKLnlvdXR1YmUtbGluazpob3ZlciB7CiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKfQoKLnByb2dyZXNzLXRleHQgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGNvbG9yOiAjMGU0Mzc3OwogICAgbWFyZ2luOiA1cHggMDsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7IC8qIFByZXZlbnQgdGV4dCB3cmFwcGluZyAqLwp9CiAgICAgIAovKiBSZXNwb25zaXZlIFN0eWxlcyAqLwpAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgIC5jb250YWluZXIgewogICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDYwcHgpOwogICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICB9CgogICAgLm5hdi1saW5rcyB7CiAgICAgICAgZGlzcGxheTogbm9uZTsKICAgIH0KCiAgICAubW9iaWxlLW1lbnUtYnRuIHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgIH0KCiAgICAubW9iaWxlLW1lbnUtb3BlbiAubmF2LWxpbmtzIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHRvcDogNzBweDsKICAgICAgICByaWdodDogMjBweDsKICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgYm94LXNoYWRvdzogMCA1cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgICAgei1pbmRleDogMTAwOwogICAgfQoKICAgIC5tb2JpbGUtbWVudS1vcGVuIC5uYXYtbGlua3MgYSB7CiAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICB9CgogICAgLm9wdGlvbnMtY29udGFpbmVyIHsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgfQoKICAgIC5idXR0b24tY29udGFpbmVyIHsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgfQoKICAgIGJ1dHRvbiB7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CgogICAgaDEgewogICAgICAgIGZvbnQtc2l6ZTogMmVtOwogICAgfQoKICAgIC5jdXN0b20tc2VsZWN0IHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBtYXJnaW46IDEwcHggMDsKICAgIH0KCiAgICAuZm9vdGVyLWxpbmtzIHsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIGdhcDogMTBweDsKICAgIH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7CiAgICAuY29udGFpbmVyIHsKICAgICAgICBwYWRkaW5nOiAxNXB4OwogICAgfQp9ICAgCiAgICAgCiA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8aGVhZGVyIGNsYXNzPSJoZWFkZXItbmF2Ij4KICAgICAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxvZ28iPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+CiAgICAgICAgICAgICAgICA8c3Bhbj5TdW1pdCBHYXJnPC9zcGFuPgogICAgICAgICAgICA8L2E+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1saW5rcyI+CiAgICAgICAgICAgICAgICA8YSBocmVmPSIjIj5Ib21lPC9hPgogICAgICAgICAgICAgICAgPGEgaHJlZj0iIyI+U2VydmljZXM8L2E+CiAgICAgICAgICAgICAgICA8YSBocmVmPSIjIj5BYm91dDwvYT4KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiMiPkNvbnRhY3Q8L2E+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtb2JpbGUtbWVudS1idG4iPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1iYXJzIj48L2k+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvaGVhZGVyPgoKICAgICAgICA8IS0tIExvZ2luIFNlY3Rpb24gLS0+CiAgICAgICAgPGRpdiBpZD0ibG9naW4tc2VjdGlvbiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi02Ij4KICAgICAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIj5HU1QgUmVjb25jaWxpYXRpb24gTG9naW48L2gxPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJnb1RvSG9tZXBhZ2UoKSIgY2xhc3M9InB4LTQgcHktMiBiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGciPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtaG9tZSI+PC9pPiBCYWNrIHRvIEhvbWVwYWdlCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi02Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InVzZXJuYW1lIiBjbGFzcz0iYmxvY2sgbWItMiI+VXNlcm5hbWU6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idXNlcm5hbWUiIHZhbHVlPSIiIHBsYWNlaG9sZGVyPSJFbnRlciB1c2VybmFtZSIgY2xhc3M9InctZnVsbCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi02Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InBhc3N3b3JkIiBjbGFzcz0iYmxvY2sgbWItMiI+UGFzc3dvcmQ6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9InBhc3N3b3JkIiB2YWx1ZT0iIiBwbGFjZWhvbGRlcj0iRW50ZXIgcGFzc3dvcmQiIGNsYXNzPSJ3LWZ1bGwiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LXdyYXAganVzdGlmeS1jZW50ZXIgZ2FwLTQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2dpbigpIiBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzFhNzNlOCwgIzBkNDdhMSk7IGNvbG9yOiB3aGl0ZTsiIGNsYXNzPSJmbGV4LTEiPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtc2lnbi1pbi1hbHQiPjwvaT4gTG9naW4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJmcmVlU2VydmljZUxvZ2luKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTQ1ZGVnLCAjZmY5ODAwLCAjZjU3YzAwKTsgY29sb3I6IHdoaXRlOyIgY2xhc3M9ImZsZXgtMSI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS11c2VyLWNoZWNrIj48L2k+IEZyZWUgU2VydmljZSBMb2dpbgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBpZD0iZXJyb3IiIGNsYXNzPSJtdC00Ij48L3A+CgogICAgICAgICAgPGRpdiBjbGFzcz0iZXhwbGFuYXRpb24iIGlkPSJleHBsYW5hdGlvbi1jb250YWluZXIiPgogICAgICAgICAgICA8aDIgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTQiPkhvdyB0byBVc2UgdGhlIEdTVCBSZWNvbmNpbGlhdGlvbiBUb29sPC9oMj4KICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlRoZSBHU1QgUmVjb25jaWxpYXRpb24gVG9vbCBpcyBkZXNpZ25lZCB0byBoZWxwIHlvdSBlYXNpbHkgY29tcGFyZSBhbmQgbWF0Y2ggeW91ciBHU1QgZGF0YSBmcm9tIEdTVFItMkIgYW5kIEdTVFItM0IuIFRoaXMgZ3VpZGUgd2lsbCB3YWxrIHlvdSB0aHJvdWdoIHRoZSBwcm9jZXNzIHN0ZXAgYnkgc3RlcC48L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtbGcgZm9udC1ib2xkIG1iLTIiPldhdGNoIFR1dG9yaWFsIFZpZGVvPC9oMz4KICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkNoZWNrIG91dCBvdXIgc3RlcC1ieS1zdGVwIHR1dG9yaWFsIHZpZGVvIG9uIFlvdVR1YmUgdG8gbGVhcm4gaG93IHRvIHVzZSB0aGUgR1NUIFJlY29uY2lsaWF0aW9uIFRvb2wgZWZmZWN0aXZlbHk6PC9wPgogICAgICAgICAgICA8cCBjbGFzcz0ibWItNiI+PGEgaHJlZj0iaHR0cHM6Ly95b3V0dS5iZS9wVFIxeXJFSGxyVSIgY2xhc3M9InlvdXR1YmUtbGluayIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciI+Q2xpY2sgSGVyZTwvYT48L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtbGcgZm9udC1ib2xkIG1iLTIiPlN0ZXAtYnktU3RlcCBHdWlkZTwvaDM+CiAgICAgICAgICAgIDxvbCBjbGFzcz0ibGlzdC1kZWNpbWFsIG1sLTYgbWItNiI+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TG9nIGluPC9zdHJvbmc+OiBVc2UgeW91ciB1c2VybmFtZSBhbmQgcGFzc3dvcmQgdG8gYWNjZXNzIHRoZSB0b29sLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RG93bmxvYWQgU2FtcGxlIEZpbGU8L3N0cm9uZz46IENsaWNrIG9uICJEb3dubG9hZCBTYW1wbGUgRXhjZWwgRmlsZSIgdG8gZ2V0IGEgdGVtcGxhdGUgZm9yIHlvdXIgZGF0YS48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlByZXBhcmUgWW91ciBEYXRhPC9zdHJvbmc+OiBFbnRlciB5b3VyIEdTVFItMkIgZGF0YSBpbiBHU1QgUG9ydGFsIHNoZWV0IGFuZCBHU1RSLTNCIG9yIGJvb2tzIGluIGNsaWVudCBkYXRhIHNoZWV0IGFjY29yZGluZyB0byB0aGUgc2FtcGxlIGZpbGUuPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5VcGxvYWQgRmlsZTwvc3Ryb25nPjogVXBsb2FkIHlvdXIgcHJlcGFyZWQgRXhjZWwgZmlsZSB1c2luZyB0aGUgIlVwbG9hZCBHU1QgRGF0YSBGaWxlIiBvcHRpb24uPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5TZXQgRGlmZmVyZW5jZSBBbGxvd2VkPC9zdHJvbmc+OiBBZGp1c3QgdGhlIHRvbGVyYW5jZSBmb3IgZGlmZmVyZW5jZXMgaW4gYW1vdW50cyAoZGVmYXVsdCBpcyAxKS48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVuYWJsZSBEZXRhaWxlZCBSZWNvbmNpbGlhdGlvbjwvc3Ryb25nPjogQ2hlY2sgdGhpcyBib3ggZm9yIGRldGFpbGVkIHJlY29uY2lsaWF0aW9uIG9yIGxlYXZlIHVuY2hlY2tlZCBmb3IgYSBzaW1wbGUgcmVjb25jaWxpYXRpb24uPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5FbmFibGUgRmlsdGVycyAoT3B0aW9uYWwpPC9zdHJvbmc+OiBVc2UgZmlsdGVycyB0byBzb3J0IG9yIHNlYXJjaCB0aHJvdWdoIHlvdXIgZGF0YS48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlJlY29uY2lsZSBEYXRhPC9zdHJvbmc+OiBDbGljayAiUmVjb25jaWxlIiB0byBwcm9jZXNzIGFuZCBtYXRjaCB5b3VyIGRhdGEuPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5SZXZpZXcgUmVzdWx0czwvc3Ryb25nPjogQ2hlY2sgdGhlIEdTVFItMkIsIEdTVFItM0IsIGFuZCBTdW1tYXJ5IHRhYmxlcyBmb3IgbWF0Y2hlZCBkYXRhLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RWRpdCBEYXRhIChJZiBOZWVkZWQpPC9zdHJvbmc+OiBNYWtlIGRpcmVjdCBlZGl0cyBpbiB0aGUgdGFibGVzIGFuZCByZWNvbmNpbGUgYWdhaW4uPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Eb3dubG9hZCBPdXRwdXQ8L3N0cm9uZz46IENsaWNrICJEb3dubG9hZCBSZWNvbmNpbGVkIERhdGEiIHRvIHNhdmUgdGhlIHJlc3VsdHMuPC9saT4KICAgICAgICAgICAgPC9vbD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC1sZyBmb250LWJvbGQgbWItMiI+RmVhdHVyZSBEZXNjcmlwdGlvbnM8L2gzPgogICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC02IG1iLTYiPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPkxvZ2luIFN5c3RlbTwvc3Ryb25nPjogU2VjdXJlIGFjY2VzcyB3aXRoIHVzZXJuYW1lIGFuZCBwYXNzd29yZC4gU3Vic2NyaXB0aW9uIHN0YXR1cyBpcyB2ZXJpZmllZCB1cG9uIGxvZ2luLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+U2FtcGxlIEZpbGUgRG93bmxvYWQ8L3N0cm9uZz46IFByb3ZpZGVzIGEgdGVtcGxhdGUgdG8gZW5zdXJlIHlvdXIgZGF0YSBpcyBjb3JyZWN0bHkgZm9ybWF0dGVkLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RmlsZSBVcGxvYWQ8L3N0cm9uZz46IFVwbG9hZCB5b3VyIEdTVCBkYXRhIGluIEV4Y2VsICgueGxzeCkgZm9ybWF0LjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RGlmZmVyZW5jZSBBbGxvd2VkPC9zdHJvbmc+OiBTZXQgdGhlIGFjY2VwdGFibGUgZGlmZmVyZW5jZSBpbiB0YXhhYmxlIHZhbHVlLCBJR1NULCBDR1NULCBhbmQgU0dTVCBmb3IgbWF0Y2hpbmcgKGRlZmF1bHQ6IDEpLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RGV0YWlsZWQgUmVjb25jaWxpYXRpb248L3N0cm9uZz46IFdoZW4gZW5hYmxlZCwgc2hvd3MgZGV0YWlsZWQgbWF0Y2ggY3JpdGVyaWE7IHdoZW4gZGlzYWJsZWQsIHNob3dzIGEgc2ltcGxpZmllZCAiTWF0Y2giIG9yICJVbm1hdGNoIi48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVuYWJsZSBGaWx0ZXJzPC9zdHJvbmc+OiBBZGRzIGRyb3Bkb3duIGZpbHRlcnMgdG8gdGFibGUgY29sdW1ucyBmb3IgZWFzeSBkYXRhIHNvcnRpbmcgYW5kIHNlYXJjaGluZy48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlJlY29uY2lsZSBCdXR0b248L3N0cm9uZz46IFByb2Nlc3NlcyB0aGUgZGF0YSBhbmQgdXBkYXRlcyB0aGUgdGFibGVzIHdpdGggbWF0Y2ggcmVzdWx0cy48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlJlc2V0IERhdGEgQnV0dG9uPC9zdHJvbmc+OiBDbGVhcnMgYWxsIHVwbG9hZGVkIGRhdGEgYW5kIHJlc2V0cyB0aGUgdG9vbC48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVkaXRhYmxlIFRhYmxlczwvc3Ryb25nPjogRGlyZWN0bHkgZWRpdCBkYXRhIGluIHRoZSB0YWJsZXM7IGNoYW5nZXMgYXJlIHJlZmxlY3RlZCB1cG9uIHJlY29uY2lsaW5nIGFnYWluLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RG93bmxvYWQgUmVjb25jaWxlZCBEYXRhPC9zdHJvbmc+OiBHZW5lcmF0ZXMgYW4gRXhjZWwgZmlsZSB3aXRoIG1hdGNoZWQgZGF0YSwgaW5jbHVkaW5nIGNvbG9yLWNvZGVkIHJvd3MgZm9yIGNsYXJpdHkuPC9saT4KICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC1sZyBmb250LWJvbGQgbWItMiI+VW5kZXJzdGFuZGluZyBNYXRjaCBDcml0ZXJpYTwvaDM+CiAgICAgICAgICAgIDxwIGNsYXNzPSJtYi0yIj5XaGVuIDxzdHJvbmc+RGV0YWlsZWQgUmVjb25jaWxpYXRpb248L3N0cm9uZz4gaXMgZW5hYmxlZCwgdGhlIHRvb2wgdXNlcyB0aGUgZm9sbG93aW5nIGNyaXRlcmlhOjwvcD4KICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtNiBtYi00Ij4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5NYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uLCBEYXRlPC9zdHJvbmc+OiBFeGFjdCBtYXRjaCBvbiBHU1ROLCBpbnZvaWNlIG51bWJlciwgYW5kIGRhdGUuPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5NYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uPC9zdHJvbmc+OiBNYXRjaCBvbiBHU1ROIGFuZCBpbnZvaWNlIG51bWJlciwgd2l0aCBwb3NzaWJsZSBkYXRlIGRpZmZlcmVuY2VzLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TWF0Y2ggLSBHU1ROLCBEYXRlPC9zdHJvbmc+OiBNYXRjaCBvbiBHU1ROIGFuZCBkYXRlLCB3aXRoIHBvc3NpYmxlIGludm9pY2UgbnVtYmVyIGRpZmZlcmVuY2VzLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TWF0Y2ggLSBHU1ROPC9zdHJvbmc+OiBNYXRjaCBvbmx5IG9uIEdTVE4sIHdpdGggZGlmZmVyZW5jZXMgaW4gaW52b2ljZSBudW1iZXIgYW5kIGRhdGUuPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Vbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3Q8L3N0cm9uZz46IEdTVE4gZnJvbSBvbmUgc2hlZXQgaXMgbm90IGZvdW5kIGluIHRoZSBvdGhlci48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlVubWF0Y2ggLSBBbXQgRGlmZjwvc3Ryb25nPjogR1NUTiBhbmQgSW52b2ljZSBOdW1iZXIgbWF0Y2gsIGJ1dCBhbW91bnRzIChUYXhhYmxlIFZhbHVlLCBJR1NULCBDR1NULCBTR1NUKSBkaWZmZXIgYnkgbW9yZSB0aGFuIHRoZSBhbGxvd2VkIGRpZmZlcmVuY2UuPC9saT4KICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Vbm1hdGNoPC9zdHJvbmc+OiBEYXRhIGRvZXMgbm90IG1lZXQgYW55IG1hdGNoIGNyaXRlcmlhLCBnZW5lcmFsbHkgZHVlIHRvIGV4dHJhIGludm9pY2VzIGluIGVpdGhlciBHU1RSLTJCIG9yIEdTVFItM0IvQm9va3M8L2xpPgogICAgICAgICAgICA8L3VsPgogICAgICAgICAgICA8cCBjbGFzcz0ibWItMiI+V2hlbiA8c3Ryb25nPkRldGFpbGVkIFJlY29uY2lsaWF0aW9uPC9zdHJvbmc+IGlzIGRpc2FibGVkLCB0aGUgY3JpdGVyaWEgYXJlIHNpbXBsaWZpZWQ6PC9wPgogICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC02IG1iLTQiPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPk1hdGNoPC9zdHJvbmc+OiBEYXRhIG1hdGNoZXMgYmFzZWQgb24gYW55IG9mIHRoZSBkZXRhaWxlZCBjcml0ZXJpYSBhYm92ZS48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlVubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdDwvc3Ryb25nPjogR1NUTiBmcm9tIG9uZSBzaGVldCBpcyBub3QgZm91bmQgaW4gdGhlIG90aGVyLjwvbGk+CiAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+VW5tYXRjaCAtIEFtdCBEaWZmPC9zdHJvbmc+OiBHU1ROIGFuZCBJbnZvaWNlIE51bWJlciBtYXRjaCwgYnV0IGFtb3VudHMgKFRheGFibGUgVmFsdWUsIElHU1QsIENHU1QsIFNHU1QpIGRpZmZlciBieSBtb3JlIHRoYW4gdGhlIGFsbG93ZWQgZGlmZmVyZW5jZS48L2xpPgogICAgICAgICAgICAgIDxsaT48c3Ryb25nPlVubWF0Y2g8L3N0cm9uZz46IERhdGEgZG9lcyBub3QgbWVldCBhbnkgbWF0Y2ggY3JpdGVyaWEsIGdlbmVyYWxseSBkdWUgdG8gZXh0cmEgaW52b2ljZXMgaW4gZWl0aGVyIEdTVFItMkIgb3IgR1NUUi0zQi9Cb29rczwvbGk+CiAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBUb29sIFNlY3Rpb24gLS0+CiAgICAgICAgPGRpdiBpZD0idG9vbC1zZWN0aW9uIiBjbGFzcz0iaGlkZGVuIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTQiPgogICAgICAgICAgICAgICAgPGgxPkdTVCBSZWNvbmNpbGlhdGlvbiBUb29sPC9oMT4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibG9nb3V0KCkiIGNsYXNzPSJweC00IHB5LTIgYmctcmVkLTYwMCBob3ZlcjpiZy1yZWQtNzAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1zaWduLW91dC1hbHQiPjwvaT4gTG9nb3V0CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxwIGlkPSJleHBpcnktbWVzc2FnZSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IiBjbGFzcz0idGV4dC1jZW50ZXIiPjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2wtcGFuZWwiPgogICAgICAgICAgICAgICAgPCEtLSBTYW1wbGUgRG93bmxvYWQgQnV0dG9uIC0tPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnV0dG9uLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iZG93bmxvYWQtc2FtcGxlIiBjbGFzcz0iYmctZ3JlZW4tNjAwIGhvdmVyOmJnLWdyZWVuLTcwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZS1kb3dubG9hZCI+PC9pPiBEb3dubG9hZCBTYW1wbGUgRXhjZWwgRmlsZQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gT3B0aW9ucyBDb250YWluZXIgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvcHRpb25zLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ib3B0aW9uLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZGlmZi1hbGxvd2VkIj5EaWZmZXJlbmNlIEFsbG93ZWQ6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImRpZmYtYWxsb3dlZCIgdmFsdWU9IjEiIG1pbj0iMCIgY2xhc3M9InctMjAiIHBsYWNlaG9sZGVyPSIwIGlmIGJsYW5rIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTYwMCI+KERlZmF1bHQ6IDEpPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoZWNrYm94LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZGV0YWlsZWQtcmVjb25jaWxpYXRpb24iIG5hbWU9ImRldGFpbGVkLXJlY29uY2lsaWF0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZGV0YWlsZWQtcmVjb25jaWxpYXRpb24iPkRldGFpbGVkIFJlY29uY2lsaWF0aW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGVja2JveC1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImVuYWJsZS1maWx0ZXIiIG5hbWU9ImVuYWJsZS1maWx0ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJlbmFibGUtZmlsdGVyIj5FbmFibGUgRmlsdGVyczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIE1lbW9yeSBNYW5hZ2VtZW50IE9wdGlvbiAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1lbW9yeS1vcHRpb24iPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoZWNrYm94LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ibWVtb3J5LXN0b3JhZ2UiIG5hbWU9Im1lbW9yeS1zdG9yYWdlIiBjaGVja2VkPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJtZW1vcnktc3RvcmFnZSI+RW5hYmxlIE1lbW9yeSBTdG9yYWdlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXNjcmlwdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIEtlZXAgdGhpcyBlbmFibGVkIGZvciBub3JtYWwgb3BlcmF0aW9ucy4gVW5jaGVjayBmb3IgdmVyeSBsYXJnZSBkYXRhc2V0cyB0byBzYXZlIG1lbW9yeS4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIFVwbG9hZCBTZWN0aW9uIC0tPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idXBsb2FkLXNlY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImdzdC1maWxlIiBjbGFzcz0iYmxvY2sgbWItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZS11cGxvYWQgbXItMiI+PC9pPlVwbG9hZCBHU1QgRGF0YSBGaWxlIChHU1RSLTJCICYgR1NUUi0zQik6CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImdzdC1maWxlIiBhY2NlcHQ9Ii54bHN4IiBjbGFzcz0iYmxvY2sgdy1mdWxsIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIFByb2dyZXNzIENvbnRhaW5lciAtLT4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzLWNvbnRhaW5lciIgY2xhc3M9InByb2dyZXNzLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJvZ3Jlc3MtdGV4dCIgaWQ9InByb2dyZXNzLXRleHQiPlByb2Nlc3NpbmcuLi48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcy1maWxsIiBpZD0icHJvZ3Jlc3MtZmlsbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJvZ3Jlc3MtdGV4dCIgaWQ9InByb2dyZXNzLXBlcmNlbnRhZ2UiPjAlPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBBY3Rpb24gQnV0dG9ucyAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ1dHRvbi1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InJlY29uY2lsZS1idG4iPgogICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXN5bmMtYWx0Ij48L2k+IFJlY29uY2lsZQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InJlc2V0LWJ0biI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdHJhc2gtYWx0Ij48L2k+IFJlc2V0IERhdGEKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRhdGEtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxoMj5HU1RSLTJCIERhdGE8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBpZD0iZ3N0cjJiLWNvbnRhaW5lciIgY2xhc3M9InRhYmxlLWNvbnRhaW5lciI+PC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxoMj5DbGllbnQgRGF0YTwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJnc3RyM2ItY29udGFpbmVyIiBjbGFzcz0idGFibGUtY29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGgyPlN1bW1hcnk8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic3VtbWFyeS1jb250YWluZXIiIGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9Im91dHB1dC1saW5rIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIGNsYXNzPSJ0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItNCI+UmVjb25jaWxlZCBPdXRwdXQ6PC9oMz4KICAgICAgICAgICAgICAgIDxhIGlkPSJkb3dubG9hZC1vdXRwdXQiIGhyZWY9IiMiIGNsYXNzPSJpbmxpbmUtYmxvY2siPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZS1leGNlbCBtci0yIj48L2k+IERvd25sb2FkIFJlY29uY2lsZWQgRGF0YQogICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgCiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93YS5tZS85NzE2ODA0NTIwIiBjbGFzcz0id2hhdHNhcHAtYnRuIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiBhcmlhLWxhYmVsPSJDaGF0IG9uIFdoYXRzQXBwIj4KICAgICAgPGkgY2xhc3M9ImZhYiBmYS13aGF0c2FwcCI+PC9pPgogICAgPC9hPgoKIDxmb290ZXI+CiAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1jb250ZW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItbGlua3MiPgogICAgICAgICAgPGEgaHJlZj0iIyI+PGkgY2xhc3M9ImZhcyBmYS1waG9uZSBtci0yIj48L2k+IFBoOiA5NzE2ODA0NTIwPC9hPgogICAgICAgICAgPGEgaHJlZj0iIyI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSBtci0yIj48L2k+IEVtYWlsOiBTdW1pdGdhcmcxMDAwMDBAZ21haWwuY29tPC9hPgogICAgICAgICAgPGEgaHJlZj0iIyI+PGkgY2xhc3M9ImZhcyBmYS1tYXAtbWFya2VyLWFsdCBtci0yIj48L2k+IEFkZHJlc3M6IFJvaGluaSwgRGVsaGktMTEwMDg2PC9hPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1saW5rcyI+CiAgICAgICAgICA8YSBocmVmPSIjIj5Qcml2YWN5IFBvbGljeTwvYT4KICAgICAgICAgIDxhIGhyZWY9IiMiPlRlcm1zIG9mIFNlcnZpY2U8L2E+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9mb290ZXI+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3hsc3hAMC4xOC41L2Rpc3QveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9leGNlbGpzQDQuMy4wL2Rpc3QvZXhjZWxqcy5taW4uanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2RhdGUtZm5zLzIuMjkuMy9kYXRlLWZucy5taW4uanMiPjwvc2NyaXB0PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgCiAgICAgICAKICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi50b0xvd2VyQ2FzZSgpLiBpbmNsdWRlcygiaHR0cHM6Ly9zdW1pdGdhcmcxMDAwMDAuZ2l0aHViLmlvIikpIHsKICAgICAgIAogICAgICAgIAogICAgICAgIGNvbnN0IHVzZXJzID0gewogICAgICAgICAgICAiU3VtaXRnYXJnIjogeyBwYXNzd29yZDogIkdhcmdAMTIzIiwgZXhwaXJ5OiAiMjAyNi0wMi0xMCIgfSwKICAgICAgICAgICAgInVzZXIxIjogeyBwYXNzd29yZDogInBhc3MxMjMiLCBleHBpcnk6ICIyMDI1LTA2LTMwIiB9LAogICAgICAgICAgICAidXNlcjIiOiB7IHBhc3N3b3JkOiAicGFzczQ1NiIsIGV4cGlyeTogIjIwMjUtMDUtMTUiIH0KICAgICAgICB9OwoKICAgICAgICBsZXQgZ3N0cjJiRGF0YSA9IFtdOwogICAgICAgIGxldCBnc3RyM2JEYXRhID0gW107CiAgICAgICAgbGV0IGlzUHJvY2Vzc2luZyA9IGZhbHNlOwogICAgICAgIGNvbnN0IGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxlZC1yZWNvbmNpbGlhdGlvbicpOwogICAgICAgIGNvbnN0IENIVU5LX1NJWkUgPSAxMDA7IC8vIFByb2Nlc3MgZGF0YSBpbiBjaHVua3Mgb2YgMTAwIHJvd3MKCiAgICAgICAgLy8gTWVtb3J5IG1hbmFnZW1lbnQKICAgICAgICBmdW5jdGlvbiBzaG91bGRVc2VNZW1vcnlTdG9yYWdlKCkgewogICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbW9yeS1zdG9yYWdlJykuY2hlY2tlZDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFN0b3JlZERhdGEoa2V5KSB7CiAgICAgICAgICAgIGlmICghc2hvdWxkVXNlTWVtb3J5U3RvcmFnZSgpKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciByZWFkaW5nIGZyb20gbG9jYWxTdG9yYWdlOicsIGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFN0b3JlZERhdGEoa2V5LCBkYXRhKSB7CiAgICAgICAgICAgIGlmICghc2hvdWxkVXNlTWVtb3J5U3RvcmFnZSgpKSByZXR1cm47CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciB3cml0aW5nIHRvIGxvY2FsU3RvcmFnZTonLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3RvcmVkRGF0YShrZXkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgcmVtb3ZpbmcgZnJvbSBsb2NhbFN0b3JhZ2U6JywgZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFByb2dyZXNzIGluZGljYXRvciBmdW5jdGlvbnMKICAgICAgICBmdW5jdGlvbiBzaG93UHJvZ3Jlc3MoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1jb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGhpZGVQcm9ncmVzcygpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhwZXJjZW50YWdlLCB0ZXh0KSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1maWxsJykuc3R5bGUud2lkdGggPSBwZXJjZW50YWdlICsgJyUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtcGVyY2VudGFnZScpLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChwZXJjZW50YWdlKSArICclJzsKICAgICAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy10ZXh0JykudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBDaHVua2VkIHByb2Nlc3NpbmcgZnVuY3Rpb24KICAgICAgICBhc3luYyBmdW5jdGlvbiBwcm9jZXNzSW5DaHVua3MoZGF0YSwgcHJvY2Vzc0ZuLCBjaHVua1NpemUgPSBDSFVOS19TSVpFKSB7CiAgICBjb25zdCByZXN1bHRzID0gW107CiAgICBjb25zdCB0b3RhbENodW5rcyA9IE1hdGguY2VpbChkYXRhLmxlbmd0aCAvIGNodW5rU2l6ZSk7CiAgICBsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxDaHVua3M7IGkrKykgewogICAgICAgIGNvbnN0IGNodW5rU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBpICogY2h1bmtTaXplOwogICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgY2h1bmtTaXplLCBkYXRhLmxlbmd0aCk7CiAgICAgICAgY29uc3QgY2h1bmsgPSBkYXRhLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICAgIAogICAgICAgIGNvbnN0IGNodW5rUmVzdWx0cyA9IGF3YWl0IHByb2Nlc3NGbihjaHVuaywgaSk7CiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLmNodW5rUmVzdWx0cyk7CiAgICAgICAgCiAgICAgICAgY29uc3QgY2h1bmtFbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgY29uc3QgY2h1bmtUaW1lID0gY2h1bmtFbmRUaW1lIC0gY2h1bmtTdGFydFRpbWU7CiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBjaHVua0VuZFRpbWUgLSBzdGFydFRpbWU7CiAgICAgICAgY29uc3QgcmVtYWluaW5nQ2h1bmtzID0gdG90YWxDaHVua3MgLSAoaSArIDEpOwogICAgICAgIGNvbnN0IGVzdGltYXRlZFJlbWFpbmluZ1RpbWUgPSByZW1haW5pbmdDaHVua3MgKiBjaHVua1RpbWUgLyAxMDAwOyAvLyBpbiBzZWNvbmRzCiAgICAgICAgCiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAoKGkgKyAxKSAvIHRvdGFsQ2h1bmtzKSAqIDEwMDsKICAgICAgICB1cGRhdGVQcm9ncmVzcyhwcm9ncmVzcywgYFByb2Nlc3NpbmcgY2h1bmsgJHtpICsgMX0gb2YgJHt0b3RhbENodW5rc30gfCBFc3QuIHRpbWUgcmVtYWluaW5nOiAke2VzdGltYXRlZFJlbWFpbmluZ1RpbWUudG9GaXhlZCgxKX1zYCk7CiAgICAgICAgCiAgICAgICAgLy8gQWxsb3cgVUkgdG8gdXBkYXRlCiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7CiAgICB9CiAgICAKICAgIHJldHVybiByZXN1bHRzOwp9CgogICAgICAgIC8vIFBhZ2UgbG9hZCBjaGVjawogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc3QgbG9nZ2VkSW5Vc2VyID0gZ2V0U3RvcmVkRGF0YSgibG9nZ2VkSW5Vc2VyIikgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2dlZEluVXNlciIpOwogICAgICAgICAgICBjb25zdCBpc0ZyZWVTZXJ2aWNlID0gZ2V0U3RvcmVkRGF0YSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSIgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlzRnJlZVNlcnZpY2UiKSA9PT0gInRydWUiOwoKICAgICAgICAgICAgaWYgKGxvZ2dlZEluVXNlcikgewogICAgICAgICAgICAgICAgaWYgKGlzRnJlZVNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgICBzaG93VG9vbCgpOwogICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0RnJlZVNlcnZpY2VGZWF0dXJlcygpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVja1N1YnNjcmlwdGlvbihsb2dnZWRJblVzZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2woKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0xvZ2luKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93TG9naW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXNlcm5hbWUiKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFzc3dvcmQiKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3IiKTsKCiAgICAgICAgICAgIGlmICh1c2Vyc1t1c2VybmFtZV0gJiYgdXNlcnNbdXNlcm5hbWVdLnBhc3N3b3JkID09PSBwYXNzd29yZCkgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrU3Vic2NyaXB0aW9uKHVzZXJuYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHNldFN0b3JlZERhdGEoImxvZ2dlZEluVXNlciIsIHVzZXJuYW1lKTsKICAgICAgICAgICAgICAgICAgICBzZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIiwgImZhbHNlIik7CiAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2woKTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJ5TWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleHBpcnktbWVzc2FnZSIpOwogICAgICAgICAgICAgICAgICAgIGlmIChleHBpcnlNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeU1lc3NhZ2UudGV4dENvbnRlbnQgPSBgU3Vic2NyaXB0aW9uIEV4cGlyeTogJHt1c2Vyc1t1c2VybmFtZV0uZXhwaXJ5fWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeU1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeU1lc3NhZ2Uuc3R5bGUub3BhY2l0eSA9ICIxIjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5TWVzc2FnZS5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5TWVzc2FnZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeU1lc3NhZ2Uuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VybmFtZSIpLnZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhc3N3b3JkIikudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICBlcnJvci50ZXh0Q29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvci50ZXh0Q29udGVudCA9ICJZb3VyIHN1YnNjcmlwdGlvbiBoYXMgZXhwaXJlZCEiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSAiSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZCEiOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmcmVlU2VydmljZUxvZ2luKCkgewogICAgICAgICAgICBzZXRTdG9yZWREYXRhKCJsb2dnZWRJblVzZXIiLCAiZnJlZVNlcnZpY2VVc2VyIik7CiAgICAgICAgICAgIHNldFN0b3JlZERhdGEoImlzRnJlZVNlcnZpY2UiLCAidHJ1ZSIpOwogICAgICAgICAgICBzaG93VG9vbCgpOwogICAgICAgICAgICByZXN0cmljdEZyZWVTZXJ2aWNlRmVhdHVyZXMoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzZXJuYW1lIikudmFsdWUgPSAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhc3N3b3JkIikudmFsdWUgPSAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yIikudGV4dENvbnRlbnQgPSAiIjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNoZWNrU3Vic2NyaXB0aW9uKHVzZXJuYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZSh1c2Vyc1t1c2VybmFtZV0uZXhwaXJ5KTsKICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICByZXR1cm4gdG9kYXkgPD0gZXhwaXJ5RGF0ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgICAgICAgcmVtb3ZlU3RvcmVkRGF0YSgibG9nZ2VkSW5Vc2VyIik7CiAgICAgICAgICAgIHJlbW92ZVN0b3JlZERhdGEoImdzdHIyYkRhdGEiKTsKICAgICAgICAgICAgcmVtb3ZlU3RvcmVkRGF0YSgiZ3N0cjNiRGF0YSIpOwogICAgICAgICAgICByZW1vdmVTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIik7CiAgICAgICAgICAgIGdzdHIyYkRhdGEgPSBbXTsKICAgICAgICAgICAgZ3N0cjNiRGF0YSA9IFtdOwogICAgICAgICAgICByZXNldERhdGEoKTsKICAgICAgICAgICAgc2hvd0xvZ2luKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VybmFtZSIpLnZhbHVlID0gIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYXNzd29yZCIpLnZhbHVlID0gIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvciIpLnRleHRDb250ZW50ID0gIiI7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnb1RvSG9tZXBhZ2UoKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vc3VtaXRnYXJnMTAwMDAwLmdpdGh1Yi5pby9Ib21lLyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzaG93TG9naW4oKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbi1zZWN0aW9uIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b29sLXNlY3Rpb24iKS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNob3dUb29sKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9naW4tc2VjdGlvbiIpLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG9vbC1zZWN0aW9uIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgogICAgICAgICAgICBjb25zdCBpc0ZyZWVTZXJ2aWNlID0gZ2V0U3RvcmVkRGF0YSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSIgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlzRnJlZVNlcnZpY2UiKSA9PT0gInRydWUiOwoKICAgICAgICAgICAgY29uc3QgZGV0YWlsZWRSZWNvbmNpbGlhdGlvbkNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRldGFpbGVkLXJlY29uY2lsaWF0aW9uIik7CiAgICAgICAgICAgIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkID0gZ2V0U3RvcmVkRGF0YSgnZGV0YWlsZWRSZWNvbmNpbGlhdGlvbicpID09PSAndHJ1ZScgJiYgIWlzRnJlZVNlcnZpY2U7CgogICAgICAgICAgICBjb25zdCByZWNvbmNpbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb25jaWxlLWJ0bicpOwogICAgICAgICAgICBjb25zdCBkb3dubG9hZFNhbXBsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1zYW1wbGUnKTsKICAgICAgICAgICAgY29uc3QgZGlmZkFsbG93ZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZi1hbGxvd2VkJyk7CiAgICAgICAgICAgIGRpZmZBbGxvd2VkLnZhbHVlID0gIjEiOwogICAgICAgICAgICBjb25zdCByZXNldEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldC1idG4nKTsKICAgICAgICAgICAgY29uc3QgZ3N0RmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnc3QtZmlsZScpOwoKICAgICAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycwogICAgICAgICAgICByZWNvbmNpbGVCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZWNvbmNpbGVEYXRhKTsKICAgICAgICAgICAgZG93bmxvYWRTYW1wbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZW5lcmF0ZVNhbXBsZUZpbGUpOwogICAgICAgICAgICBkaWZmQWxsb3dlZC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHJlY29uY2lsZURhdGEpOwogICAgICAgICAgICByZXNldEJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc2V0RGF0YSk7CiAgICAgICAgICAgIGdzdEZpbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVVwbG9hZCk7CgogICAgICAgICAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzCiAgICAgICAgICAgIGdzdEZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVVwbG9hZCk7CiAgICAgICAgICAgIHJlY29uY2lsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlY29uY2lsZURhdGEpOwogICAgICAgICAgICBkb3dubG9hZFNhbXBsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdlbmVyYXRlU2FtcGxlRmlsZSk7CiAgICAgICAgICAgIGRpZmZBbGxvd2VkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZGVib3VuY2UocmVjb25jaWxlRGF0YSwgNTAwKSk7CiAgICAgICAgICAgIHJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzZXREYXRhKTsKCiAgICAgICAgICAgIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVDaGVja2JveENoYW5nZSk7CiAgICAgICAgICAgIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVDaGVja2JveENoYW5nZSk7CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDaGVja2JveENoYW5nZSgpIHsKICAgICAgICAgICAgICAgIHJlY29uY2lsZURhdGEoKTsKICAgICAgICAgICAgICAgIHNldFN0b3JlZERhdGEoJ2RldGFpbGVkUmVjb25jaWxpYXRpb24nLCBkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guY2hlY2tlZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFJlc3RvcmUgcHJldmlvdXMgZGF0YQogICAgICAgICAgICBjb25zdCBzdG9yZWQyYkRhdGEgPSBnZXRTdG9yZWREYXRhKCdnc3RyMmJEYXRhJyk7CiAgICAgICAgICAgIGNvbnN0IHN0b3JlZDNiRGF0YSA9IGdldFN0b3JlZERhdGEoJ2dzdHIzYkRhdGEnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChzdG9yZWQyYkRhdGEgJiYgc3RvcmVkMmJEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGdzdHIyYkRhdGEgPSBzdG9yZWQyYkRhdGE7CiAgICAgICAgICAgICAgICBkaXNwbGF5RGF0YShnc3RyMmJEYXRhLCAnZ3N0cjJiLWNvbnRhaW5lcicsIGdzdHIyYkhlYWRlcnMoKSwgJ2dzdHIyYicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdG9yZWQzYkRhdGEgJiYgc3RvcmVkM2JEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGdzdHIzYkRhdGEgPSBzdG9yZWQzYkRhdGE7CiAgICAgICAgICAgICAgICBkaXNwbGF5RGF0YShnc3RyM2JEYXRhLCAnZ3N0cjNiLWNvbnRhaW5lcicsIGdzdHIzYkhlYWRlcnMoKSwgJ2dzdHIzYicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChnc3RyMmJEYXRhLmxlbmd0aCA+IDAgfHwgZ3N0cjNiRGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICByZWNvbmNpbGVEYXRhKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGZpbHRlckNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVuYWJsZS1maWx0ZXIiKTsKICAgICAgICAgICAgaWYgKCFpc0ZyZWVTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZpbHRlckNoZWNrYm94LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBkaWZmQWxsb3dlZC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZyZWUtc2VydmljZS1ub3RpY2UiKT8ucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdHJpY3RGcmVlU2VydmljZUZlYXR1cmVzKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXN0cmljdEZyZWVTZXJ2aWNlRmVhdHVyZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGlzRnJlZVNlcnZpY2UgPSBnZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIikgPT09ICJ0cnVlIiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSI7CgogICAgICAgICAgICBpZiAoaXNGcmVlU2VydmljZSkgewogICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsZWRDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRhaWxlZC1yZWNvbmNpbGlhdGlvbiIpOwogICAgICAgICAgICAgICAgZGV0YWlsZWRDaGVja2JveC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBkZXRhaWxlZENoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbmFibGUtZmlsdGVyIik7CiAgICAgICAgICAgICAgICBmaWx0ZXJDaGVja2JveC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmaWx0ZXJDaGVja2JveC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmaWx0ZXJFbmFibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0b2dnbGVGaWx0ZXJzKCk7CgogICAgICAgICAgICAgICAgY29uc3QgZGlmZkFsbG93ZWRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkaWZmLWFsbG93ZWQiKTsKICAgICAgICAgICAgICAgIGRpZmZBbGxvd2VkSW5wdXQudmFsdWUgPSAiMSI7CiAgICAgICAgICAgICAgICBkaWZmQWxsb3dlZElucHV0LmRpc2FibGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjZ3N0cjJiLWNvbnRhaW5lciB0YWJsZSwgI2dzdHIzYi1jb250YWluZXIgdGFibGUiKTsKICAgICAgICAgICAgICAgIHRhYmxlcy5mb3JFYWNoKHRhYmxlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgidGJvZHkgdHIiKTsKICAgICAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgidGQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCAiZmFsc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBhcHBseUZyZWVTZXJ2aWNlQ29sb3JzKCk7CgogICAgICAgICAgICAgICAgY29uc3QgdG9vbFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG9vbC1zZWN0aW9uIik7CiAgICAgICAgICAgICAgICBjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7CiAgICAgICAgICAgICAgICBub3RpY2UuaWQgPSAiZnJlZS1zZXJ2aWNlLW5vdGljZSI7CiAgICAgICAgICAgICAgICBub3RpY2Uuc3R5bGUuY29sb3IgPSAiI2U1MzkzNSI7CiAgICAgICAgICAgICAgICBub3RpY2Uuc3R5bGUudGV4dEFsaWduID0gImNlbnRlciI7CiAgICAgICAgICAgICAgICBub3RpY2Uuc3R5bGUucGFkZGluZyA9ICIxMHB4IjsKICAgICAgICAgICAgICAgIG5vdGljZS5zdHlsZS5tYXJnaW4gPSAiMTBweCAwIjsKICAgICAgICAgICAgICAgIG5vdGljZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2ZmZWJlZSI7CiAgICAgICAgICAgICAgICBub3RpY2Uuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjhweCI7CiAgICAgICAgICAgICAgICBub3RpY2Uuc3R5bGUuYm9yZGVyTGVmdCA9ICI0cHggc29saWQgI2U1MzkzNSI7CiAgICAgICAgICAgICAgICBub3RpY2UudGV4dENvbnRlbnQgPSAiSW4gRnJlZSBTZXJ2aWNlOiBEZXRhaWxlZCBSZWNvbmNpbGlhdGlvbiBmZWF0dXJlLCBFbmFibGUgRmlsdGVyICYgc29ydGluZyBvcHRpb24sIGFsdGVyYXRpb24gb2YgRGlmZmVyZW5jZSBBbGxvd2VkIGxpbWl0IGFuZCBmYWNpbGl0eSBvZiBlZGl0YWJsZSBmaWVsZHMgYXJlIGRpc2FibGVkLiI7CiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmcmVlLXNlcnZpY2Utbm90aWNlIikpIHsKICAgICAgICAgICAgICAgICAgICB0b29sU2VjdGlvbi5pbnNlcnRCZWZvcmUobm90aWNlLCB0b29sU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCIuY29udHJvbC1wYW5lbCIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXREYXRhKCkgewogICAgICAgICAgICBnc3RyMmJEYXRhID0gW107CiAgICAgICAgICAgIGdzdHIzYkRhdGEgPSBbXTsKICAgICAgICAgICAgcmVtb3ZlU3RvcmVkRGF0YSgnZ3N0cjJiRGF0YScpOwogICAgICAgICAgICByZW1vdmVTdG9yZWREYXRhKCdnc3RyM2JEYXRhJyk7CiAgICAgICAgICAgIHNldFN0b3JlZERhdGEoJ2RldGFpbGVkUmVjb25jaWxpYXRpb24nLCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnc3RyMmItY29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnc3RyM2ItY29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW1tYXJ5LWNvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0LWxpbmsnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3N0LWZpbGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZi1hbGxvd2VkJykudmFsdWUgPSAnMSc7CiAgICAgICAgICAgIGhpZGVQcm9ncmVzcygpOwogICAgICAgIH0KCiAgICAgICAgLy8gRGVib3VuY2UgZnVuY3Rpb24gZm9yIHBlcmZvcm1hbmNlCiAgICAgICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCkgewogICAgICAgICAgICBsZXQgdGltZW91dDsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGV4ZWN1dGVkRnVuY3Rpb24oLi4uYXJncykgewogICAgICAgICAgICAgICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgIGZ1bmMoLi4uYXJncyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmRGb3JtYXREYXRlKGRhdGVJbnB1dCkgewogICAgICAgICAgICBpZiAoIWRhdGVJbnB1dCB8fCBkYXRlSW5wdXQgPT09ICcnKSByZXR1cm4gJyc7CgogICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ107CiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IG1vbnRoTmFtZXNbZGF0ZS5nZXRNb250aCgpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZGF5fS0ke21vbnRofS0ke3llYXJ9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRlSW5wdXQgPT09ICdudW1iZXInICYmIGRhdGVJbnB1dCA+IDQwMDAwICYmIGRhdGVJbnB1dCA8IDUwMDAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGNlbEVwb2NoID0gbmV3IERhdGUoMTg5OSwgMTEsIDMwKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKGRhdGVJbnB1dCk7CiAgICAgICAgICAgICAgICBjb25zdCBtaWxsaXNlY29uZHMgPSBNYXRoLnJvdW5kKChkYXRlSW5wdXQgLSBkYXlzKSAqIDg2NDAwICogMTAwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZXhjZWxFcG9jaC5nZXRUaW1lKCkgKyBkYXlzICogODY0MDAgKiAxMDAwICsgbWlsbGlzZWNvbmRzKTsKICAgICAgICAgICAgICAgIGlmIChkYXRlSW5wdXQgPD0gNjApIHsKICAgICAgICAgICAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodHlwZW9mIGRhdGVJbnB1dCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJbnB1dCA9IGRhdGVJbnB1dC50cmltKCkucmVwbGFjZSgvW1wuXC9dL2csICctJyk7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgbW1tUmVnZXggPSAvXihcZHsxLDJ9KS0oW0EtWmEtel17M30pLShcZHsyLDR9KSQvOwogICAgICAgICAgICAgICAgaWYgKG1tbVJlZ2V4LnRlc3Qobm9ybWFsaXplZElucHV0KSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IFssIGRheSwgbW9udGhTdHIsIHllYXJdID0gbm9ybWFsaXplZElucHV0Lm1hdGNoKG1tbVJlZ2V4KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtb250aE5hbWVzID0gWydqYW4nLCAnZmViJywgJ21hcicsICdhcHInLCAnbWF5JywgJ2p1bicsICdqdWwnLCAnYXVnJywgJ3NlcCcsICdvY3QnLCAnbm92JywgJ2RlYyddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoSW5kZXggPSBtb250aE5hbWVzLmluZGV4T2YobW9udGhTdHIudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1vbnRoSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxZZWFyID0geWVhci5sZW5ndGggPT09IDIgPyAocGFyc2VJbnQoeWVhcikgPCA1MCA/IGAyMCR7eWVhcn1gIDogYDE5JHt5ZWFyfWApIDogeWVhcjsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KGZ1bGxZZWFyKSwgbW9udGhJbmRleCwgcGFyc2VJbnQoZGF5KSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghZGF0ZSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkbXlSZWdleCA9IC9eKFxkezEsMn0pLShcZHsxLDJ9KS0oXGR7Miw0fSkkLzsKICAgICAgICAgICAgICAgICAgICBpZiAoZG15UmVnZXgudGVzdChub3JtYWxpemVkSW5wdXQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFssIGRheSwgbW9udGgsIHllYXJdID0gbm9ybWFsaXplZElucHV0Lm1hdGNoKGRteVJlZ2V4KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFllYXIgPSB5ZWFyLmxlbmd0aCA9PT0gMiA/IChwYXJzZUludCh5ZWFyKSA8IDUwID8gYDIwJHt5ZWFyfWAgOiBgMTkke3llYXJ9YCkgOiB5ZWFyOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUocGFyc2VJbnQoZnVsbFllYXIpLCBwYXJzZUludChtb250aCkgLSAxLCBwYXJzZUludChkYXkpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFkYXRlIHx8IGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgewogICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShub3JtYWxpemVkSW5wdXQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChkYXRlICYmICFpc05hTihkYXRlLmdldFRpbWUoKSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChkYXRlSW5wdXQgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihkYXRlSW5wdXQuZ2V0VGltZSgpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZUlucHV0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlSW5wdXQpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcnNlQW5kRm9ybWF0RGF0ZShkYXRlSW5wdXQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgYmFzZUdzdHIyYkhlYWRlcnMgPSBbJ01hdGNoIENyaXRlcmlhJywgJ0dTVE4nLCAnTmFtZSBvZiBTdXBwbGllcicsICdJbnZvaWNlIE51bWJlcicsICdJbnZvaWNlIHR5cGUnLCAnSW52b2ljZSBEYXRlJywgJ0ludm9pY2UgVmFsdWUnLCAnUGxhY2Ugb2Ygc3VwcGx5JywgJ1JldmVyc2UgQ2hhcmdlJywgJ1JhdGUgKCUpJywgJ1RheGFibGUgVmFsdWUnLCAnSUdTVCcsICdDR1NUJywgJ1NHU1QnXTsKICAgICAgICBjb25zdCBleHRlbmRlZEdzdHIyYkhlYWRlcnMgPSBbJ0Nlc3MnLCAnR1NUUi0xLzUgUGVyaW9kJywgJ0dTVFItMS81IEZpbGluZyBEYXRlJywgJ0lUQyBBdmFpbGFiaWxpdHknLCAnUmVhc29uJywgJ0FwcGxpY2FibGUgJSBvZiBUYXggUmF0ZScsICdTb3VyY2UnLCAnSVJOJywgJ0lSTiBEYXRlJ107CiAgICAgICAgZnVuY3Rpb24gZ3N0cjJiSGVhZGVycygpIHsgcmV0dXJuIFsuLi5iYXNlR3N0cjJiSGVhZGVycywgLi4uZXh0ZW5kZWRHc3RyMmJIZWFkZXJzXTsgfQoKICAgICAgICBjb25zdCBiYXNlR3N0cjNiSGVhZGVycyA9IFsnTWF0Y2ggQ3JpdGVyaWEnLCAnSW52b2ljZSBEYXRlJywgJ0dTVE4nLCAnTmFtZSBvZiBTdXBwbGllcicsICdJbnZvaWNlIE51bWJlcicsICdUYXhhYmxlIFZhbHVlJywgJ0lHU1QnLCAnQ0dTVCcsICdTR1NUJywgJ0NFU1MnXTsKICAgICAgICBjb25zdCBleHRlbmRlZEdzdHIzYkhlYWRlcnMgPSBbJ0ludm9pY2UgVmFsdWUnXTsKICAgICAgICBmdW5jdGlvbiBnc3RyM2JIZWFkZXJzKCkgeyByZXR1cm4gWy4uLmJhc2VHc3RyM2JIZWFkZXJzLCAuLi5leHRlbmRlZEdzdHIzYkhlYWRlcnNdOyB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlU2FtcGxlRmlsZShldmVudCkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsKICAgICAgICAgICAgY29uc3QgZ3N0cjJiU2FtcGxlSGVhZGVycyA9IGdzdHIyYkhlYWRlcnMoKTsKICAgICAgICAgICAgCmNvbnN0IGdzdHIyYlNhbXBsZSA9IFsKICAgIGdzdHIyYlNhbXBsZUhlYWRlcnMsCiAgICAvLyBNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uLCBEYXRlICgyIGVudHJpZXMpCiAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnLCAnMjdBQUJDVTk2MDNSMVpNJywgJ1N1cHBsaWVyIEEnLCAnSU5WMDAxJywgJ1JlZ3VsYXInLCAnMDEtTWFyLTIwMjUnLCAxMTgwMCwgJ01haGFyYXNodHJhJywgJ04nLCAxOCwgMTAwMDAsIDE4MDAsIDAsIDAsIDAsICdNYXItMjAyNScsICcxNS1NYXItMjAyNScsICdZZXMnLCAnTi9BJywgMCwgJ0dTVFItMScsICdJUk4wMDEnLCAnMDItTWFyLTIwMjUnXSwKICAgIFsnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiwgRGF0ZScsICcyN0FBQkNVOTYwM1IxWk0nLCAnU3VwcGxpZXIgQScsICdpbnYwMDEnLCAnUmVndWxhcicsICcwMS1NYXItMjAyNScsIDU5MDAsICdNYWhhcmFzaHRyYScsICdOJywgMTgsIDUwMDAsIDkwMCwgMCwgMCwgMCwgJ01hci0yMDI1JywgJzE1LU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi0xJywgJ0lSTjAwMicsICcwMi1NYXItMjAyNSddLAogICAgLy8gTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiAoMiBlbnRyaWVzLCBkaWZmZXJlbnQgZGF0ZXMpCiAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4nLCAnMjlYWVoxMjM0UDFaUScsICdTdXBwbGllciBCJywgJ0lOVjAwMicsICdSZWd1bGFyJywgJzAyLU1hci0yMDI1JywgMjM2MDAsICdLYXJuYXRha2EnLCAnTicsIDksIDIwMDAwLCAwLCAxODAwLCAxODAwLCAwLCAnTWFyLTIwMjUnLCAnMTYtTWFyLTIwMjUnLCAnWWVzJywgJ04vQScsIDAsICdHU1RSLTUnLCAnSVJOMDAzJywgJzAzLU1hci0yMDI1J10sCiAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4nLCAnMjlYWVoxMjM0UDFaUScsICdTdXBwbGllciBCJywgJ0lOVjAwNCcsICdSZWd1bGFyJywgJzA0LU1hci0yMDI1JywgMTE4MDAsICdLYXJuYXRha2EnLCAnTicsIDksIDEwMDAwLCAwLCA5MDAsIDkwMCwgMCwgJ01hci0yMDI1JywgJzE2LU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi01JywgJ0lSTjAwNCcsICcwNC1NYXItMjAyNSddLAogICAgLy8gTWF0Y2ggLSBHU1ROLCBEYXRlICgyIGVudHJpZXMsIGRpZmZlcmVudCBpbnZvaWNlIG51bWJlcnMpCiAgICBbJ01hdGNoIC0gR1NUTiwgRGF0ZScsICczM0FCQ0RFNTY3OEYxWjUnLCAnU3VwcGxpZXIgQycsICdJTlYwMDAzJywgJ1JlZ3VsYXInLCAnMDQtTWFyLTIwMjUnLCAxNDE2MCwgJ1RhbWlsIE5hZHUnLCAnTicsIDE4LCAxMjAwMCwgMjE2MCwgMCwgMCwgMCwgJ01hci0yMDI1JywgJzE3LU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi0xJywgJ0lSTjAwNScsICcwNS1NYXItMjAyNSddLAogICAgWydNYXRjaCAtIEdTVE4sIERhdGUnLCAnMzNBQkNERTU2NzhGMVo1JywgJ1N1cHBsaWVyIEMnLCAnSU5WMDAwNCcsICdSZWd1bGFyJywgJzA0LU1hci0yMDI1JywgNzA4MCwgJ1RhbWlsIE5hZHUnLCAnTicsIDE4LCA2MDAwLCAxMDgwLCAwLCAwLCAwLCAnTWFyLTIwMjUnLCAnMTctTWFyLTIwMjUnLCAnWWVzJywgJ04vQScsIDAsICdHU1RSLTEnLCAnSVJOMDA2JywgJzA1LU1hci0yMDI1J10sCiAgICAvLyBNYXRjaCAtIEdTVE4gKDIgZW50cmllcywgZGlmZmVyZW50IGludm9pY2UgbnVtYmVycyBhbmQgZGF0ZXMpCiAgICBbJ01hdGNoIC0gR1NUTicsICcyN0FBQkNVOTYwM1IyWk0nLCAnU3VwcGxpZXIgQycsICdJTlYwMDA1JywgJ1JlZ3VsYXInLCAnMzEtTWFyLTIwMjUnLCA5NDQwLCAnTWFoYXJhc2h0cmEnLCAnTicsIDE4LCA4MDAwLCAxNDQwLCAwLCAwLCAwLCAnTWFyLTIwMjUnLCAnMzEtTWFyLTIwMjUnLCAnWWVzJywgJ04vQScsIDAsICdHU1RSLTEnLCAnSVJOMDA3JywgJzA2LU1hci0yMDI1J10sCiAgICBbJ01hdGNoIC0gR1NUTicsICcyN0FBQkNVOTYwM1IyWk0nLCAnU3VwcGxpZXIgQycsICdJTlYwMDA2JywgJ1JlZ3VsYXInLCAnMzEtTWFyLTIwMjUnLCA0NzIwLCAnTWFoYXJhc2h0cmEnLCAnTicsIDE4LCA0MDAwLCA3MjAsIDAsIDAsIDAsICdNYXItMjAyNScsICczMS1NYXItMjAyNScsICdZZXMnLCAnTi9BJywgMCwgJ0dTVFItMScsICdJUk4wMDgnLCAnMDctTWFyLTIwMjUnXSwKICAgIC8vIFVubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCAoMiBlbnRyaWVzKQogICAgWydVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnLCAnOTlOT1RFWElTVDEyMzRaJywgJ1N1cHBsaWVyIFgnLCAnSU5WMDA3JywgJ1JlZ3VsYXInLCAnMDctTWFyLTIwMjUnLCAxMTgwMCwgJ0RlbGhpJywgJ04nLCAxOCwgMTAwMDAsIDE4MDAsIDAsIDAsIDAsICdNYXItMjAyNScsICcxOS1NYXItMjAyNScsICdZZXMnLCAnTi9BJywgMCwgJ0dTVFItMScsICdJUk4wMDknLCAnMDgtTWFyLTIwMjUnXSwKICAgIFsnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JywgJzk5Tk9URVhJU1Q1Njc4WicsICdTdXBwbGllciBZJywgJ0lOVjAwOCcsICdSZWd1bGFyJywgJzA4LU1hci0yMDI1JywgNTkwMCwgJ0RlbGhpJywgJ04nLCAxOCwgNTAwMCwgOTAwLCAwLCAwLCAwLCAnTWFyLTIwMjUnLCAnMTktTWFyLTIwMjUnLCAnWWVzJywgJ04vQScsIDAsICdHU1RSLTEnLCAnSVJOMDEwJywgJzA5LU1hci0yMDI1J10sCiAgICAvLyBVbm1hdGNoIC0gQW10IERpZmYgKDIgZW50cmllcywgc2FtZSBpbnZvaWNlIG51bWJlciwgZGlmZmVyZW50IGFtb3VudHMpCiAgICBbJ1VubWF0Y2ggLSBBbXQgRGlmZicsICcyN0FBQkNVOTYwM1IxWk0nLCAnU3VwcGxpZXIgQScsICdJTlYwMDknLCAnUmVndWxhcicsICcwOS1NYXItMjAyNScsIDExODAyLCAnTWFoYXJhc2h0cmEnLCAnTicsIDE4LCAxMDAwMCwgMTgwMiwgMCwgMCwgMCwgJ01hci0yMDI1JywgJzIwLU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi0xJywgJ0lSTjAxMScsICcxMC1NYXItMjAyNSddLAogICAgWydVbm1hdGNoIC0gQW10IERpZmYnLCAnMjdBQUJDVTk2MDNSMVpNJywgJ1N1cHBsaWVyIEEnLCAnSU5WMDA5JywgJ1JlZ3VsYXInLCAnMDktTWFyLTIwMjUnLCA1OTAwLCAnTWFoYXJhc2h0cmEnLCAnTicsIDUsIDUwMDAsIDI1MCwgMCwgMCwgMCwgJ01hci0yMDI1JywgJzIwLU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi0xJywgJ0lSTjAxMicsICcxMC1NYXItMjAyNSddLAogICAgLy8gVW5tYXRjaCAoMiBlbnRyaWVzLCBleHRyYSBpbnZvaWNlcykKICAgIFsnVW5tYXRjaCcsICcyN0FBQkNVOTYwM1IxWk0nLCAnU3VwcGxpZXIgQScsICdJTlYwMTAnLCAnUmVndWxhcicsICcxMC1NYXItMjAyNScsIDcwODAsICdNYWhhcmFzaHRyYScsICdOJywgMTgsIDYwMDAsIDEwODAsIDAsIDAsIDAsICdNYXItMjAyNScsICcyMS1NYXItMjAyNScsICdZZXMnLCAnTi9BJywgMCwgJ0dTVFItMScsICdJUk4wMTMnLCAnMTEtTWFyLTIwMjUnXSwKICAgIFsnVW5tYXRjaCcsICcyOVhZWjEyMzRQMVpRJywgJ1N1cHBsaWVyIEInLCAnSU5WMDExJywgJ1JlZ3VsYXInLCAnMTEtTWFyLTIwMjUnLCA5NDQwLCAnS2FybmF0YWthJywgJ04nLCA5LCA4MDAwLCAwLCA3MjAsIDcyMCwgMCwgJ01hci0yMDI1JywgJzIyLU1hci0yMDI1JywgJ1llcycsICdOL0EnLCAwLCAnR1NUUi01JywgJ0lSTjAxNCcsICcxMi1NYXItMjAyNSddLAogIF07CiAgICAgICAgICAKICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB3czEgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldChnc3RyMmJTYW1wbGUpOwogICAgICAgICAgICBnc3RyMmJTYW1wbGVIZWFkZXJzLmZvckVhY2goKF8sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gd3MxW1hMU1gudXRpbHMuZW5jb2RlX2NlbGwoeyByOiAwLCBjOiBpbmRleCB9KV07CiAgICAgICAgICAgICAgICBpZiAoY2VsbCkgY2VsbC5zID0geyBmaWxsOiB7IGZnQ29sb3I6IHsgcmdiOiAnRTBGRkZGJyB9IH0gfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIHdzMSwgJ0dTVCBQb3J0YWwnKTsKCiAgICAgICAgICAgIGNvbnN0IGdzdHIzYlNhbXBsZUhlYWRlcnMgPSBnc3RyM2JIZWFkZXJzKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZ3N0cjNiU2FtcGxlID0gWwogIGdzdHIzYlNhbXBsZUhlYWRlcnMsCiAgWydNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uLCBEYXRlJywgJzAxLU1hci0yMDI1JywgJzI3QUFCQ1U5NjAzUjFaTScsICdTdXBwbGllciBBJywgJ0lOVjAwMScsIDEwMDAwLCAxODAwLCAwLCAwLCAwLCAxMTgwMF0sCiAgWydNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uLCBEYXRlJywgJzAxLU1hci0yMDI1JywgJzI3QUFCQ1U5NjAzUjFaTScsICdTdXBwbGllciBBJywgJ2ludjAwMScsIDUwMDAsIDkwMCwgMCwgMCwgMCwgNTkwMF0sCiAgWydNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uJywgJzAzLU1hci0yMDI1JywgJzI5WFlaMTIzNFAxWlEnLCAnU3VwcGxpZXIgQicsICdJTlYwMDInLCAyMDAwMCwgMCwgMTgwMCwgMTgwMCwgMjAwLCAyMzYwMF0sCiAgWydNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uJywgJzAzLU1hci0yMDI1JywgJzI5WFlaMTIzNFAxWlEnLCAnU3VwcGxpZXIgQicsICdJTlYwMDQnLCAxMDAwMCwgMCwgOTAwLCA5MDAsIDEwMCwgMTE4MDBdLAogIFsnTWF0Y2ggLSBHU1ROLCBEYXRlJywgJzA0LU1hci0yMDI1JywgJzMzQUJDREU1Njc4RjFaNScsICdTdXBwbGllciBDJywgJ0lOVjAwMycsIDEyMDAwLCAyMTYwLCAwLCAwLCAwLCAxNDE2MF0sCiAgWydNYXRjaCAtIEdTVE4sIERhdGUnLCAnMDQtTWFyLTIwMjUnLCAnMzNBQkNERTU2NzhGMVo1JywgJ1N1cHBsaWVyIEMnLCAnSU5WMDA0JywgNjAwMCwgMTA4MCwgMCwgMCwgMCwgNzA4MF0sCiAgWydNYXRjaCAtIEdTVE4nLCAnMDUtTWFyLTIwMjUnLCAnMjdBQUJDVTk2MDNSMlpNJywgJ1N1cHBsaWVyIEMnLCAnSU5WMDA1JywgODAwMCwgMTQ0MCwgMCwgMCwgMCwgOTQ0MF0sCiAgWydNYXRjaCAtIEdTVE4nLCAnMDYtTWFyLTIwMjUnLCAnMjdBQUJDVTk2MDNSMlpNJywgJ1N1cHBsaWVyIEMnLCAnSU5WMDA2JywgNDAwMCwgNzIwLCAwLCAwLCAwLCA0NzIwXSwKICBbJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCcsICcwNy1NYXItMjAyNScsICc4OFVOSVFVRTEyMzRaJywgJ1N1cHBsaWVyIFonLCAnSU5WMDE1JywgMTAwMDAsIDE4MDAsIDAsIDAsIDAsIDExODAwXSwKICBbJ1VubWF0Y2ggLSBBbXQgRGlmZicsICcwOS1NYXItMjAyNScsICcyN0FBQkNVOTYwM1IxWk0nLCAnU3VwcGxpZXIgQScsICdJTlYwMDknLCAxMDAwMCwgMTgwMCwgMCwgMCwgMjAwLCAxMTgwMF0sCiAgWydVbm1hdGNoIC0gQW10IERpZmYnLCAnMDktTWFyLTIwMjUnLCAnMjdBQUJDVTk2MDNSMVpNJywgJ1N1cHBsaWVyIEEnLCAnSU5WMDA5JywgNTAwMCwgMjUwLCAwLCAwLCAxMDAsIDUyNTBdLAogIFsnVW5tYXRjaCcsICcxMi1NYXItMjAyNScsICczM0FCQ0RFNTY3OEYxWjUnLCAnU3VwcGxpZXIgQycsICdJTlYwMTMnLCA3MDAwLCAxMjYwLCAwLCAwLCAwLCA4MjYwXSwKICBbJ1VubWF0Y2gnLCAnMTMtTWFyLTIwMjUnLCAnMjlYWVoxMjM0UDFaUScsICdTdXBwbGllciBCJywgJ0lOVjAxNCcsIDkwMDAsIDAsIDgxMCwgODEwLCAxNTAsIDEwNjIwXSwKXTsKICAgICAgICAgICAKICAgICAgICAgICAKICAgICAgICAgICAKICAgICAgICAgICAKICAgICAgICAgICAgY29uc3Qgd3MyID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoZ3N0cjNiU2FtcGxlKTsKICAgICAgICAgICAgZ3N0cjNiU2FtcGxlSGVhZGVycy5mb3JFYWNoKChfLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHdzMltYTFNYLnV0aWxzLmVuY29kZV9jZWxsKHsgcjogMCwgYzogaW5kZXggfSldOwogICAgICAgICAgICAgICAgaWYgKGNlbGwpIGNlbGwucyA9IHsgZmlsbDogeyBmZ0NvbG9yOiB7IHJnYjogJ0UwRkZGRicgfSB9IH07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3czIsICdDbGllbnQgRGF0YScpOwoKICAgICAgICAgICAgY29uc3Qgd2JvdXQgPSBYTFNYLndyaXRlKHdiLCB7IGJvb2tUeXBlOiAneGxzeCcsIHR5cGU6ICdhcnJheScgfSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbd2JvdXRdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0pOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSAnU2FtcGxlX0dTVF9SZWNvbmNpbGlhdGlvbi54bHN4JzsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplUm93KHJvdywgaGVhZGVyTGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBuZXcgQXJyYXkoaGVhZGVyTGVuZ3RoKS5maWxsKCcnKTsKICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBoZWFkZXJMZW5ndGgpIG5vcm1hbGl6ZWRbaW5kZXhdID0gY2VsbCA9PT0gdW5kZWZpbmVkIHx8IGNlbGwgPT09IG51bGwgPyAnJyA6IGNlbGw7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplZDsKICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZpbGVVcGxvYWQoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGlzUHJvY2Vzc2luZykgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CgogICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSB0cnVlOwogICAgICAgICAgICBzaG93UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMCwgJ1JlYWRpbmcgZmlsZS4uLicpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7IHR5cGU6ICdhcnJheScsIGRhdGVORjogJ2RkLW1tbS15eXl5JywgcmF3OiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMjUsICdQcm9jZXNzaW5nIEdTVFItMkIgZGF0YS4uLicpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBHU1RSLTJCIERhdGEgaW4gY2h1bmtzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdzdHIyYlNoZWV0ID0gd29ya2Jvb2suU2hlZXRzWydHU1QgUG9ydGFsJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnc3RyMmJTaGVldCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihnc3RyMmJTaGVldCwgeyBoZWFkZXI6IDEsIGRlZnZhbDogJycgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhVG9Qcm9jZXNzID0gcmF3RGF0YS5zbGljZSgxKTsgLy8gUmVtb3ZlIGhlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnc3RyMmJEYXRhID0gYXdhaXQgcHJvY2Vzc0luQ2h1bmtzKGRhdGFUb1Byb2Nlc3MsIGFzeW5jIChjaHVuaykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuay5tYXAocm93ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVJvdyhyb3csIGdzdHIyYkhlYWRlcnMoKS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5kaWNlcyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdzdHIyYkhlYWRlcnMoKS5pbmRleE9mKCdJbnZvaWNlIERhdGUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdzdHIyYkhlYWRlcnMoKS5pbmRleE9mKCdHU1RSLTEvNSBGaWxpbmcgRGF0ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3N0cjJiSGVhZGVycygpLmluZGV4T2YoJ0lSTiBEYXRlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUluZGljZXMuZm9yRWFjaChpZHggPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRbaWR4XSAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkW2lkeF0gPSBwYXJzZUFuZEZvcm1hdERhdGUobm9ybWFsaXplZFtpZHhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0b3JlZERhdGEoJ2dzdHIyYkRhdGEnLCBnc3RyMmJEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc3BsYXlEYXRhQXN5bmMoZ3N0cjJiRGF0YSwgJ2dzdHIyYi1jb250YWluZXInLCBnc3RyMmJIZWFkZXJzKCksICdnc3RyMmInKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoNTAsICdQcm9jZXNzaW5nIEdTVFItM0IgZGF0YS4uLicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBHU1RSLTNCIERhdGEgaW4gY2h1bmtzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdzdHIzYlNoZWV0ID0gd29ya2Jvb2suU2hlZXRzWydDbGllbnQgRGF0YSddOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3N0cjNiU2hlZXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd0RhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24oZ3N0cjNiU2hlZXQsIHsgaGVhZGVyOiAxLCBkZWZ2YWw6ICcnIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YVRvUHJvY2VzcyA9IHJhd0RhdGEuc2xpY2UoMSk7IC8vIFJlbW92ZSBoZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3N0cjNiRGF0YSA9IGF3YWl0IHByb2Nlc3NJbkNodW5rcyhkYXRhVG9Qcm9jZXNzLCBhc3luYyAoY2h1bmspID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsubWFwKHJvdyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVSb3cocm93LCBnc3RyM2JIZWFkZXJzKCkubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUluZGV4ID0gZ3N0cjNiSGVhZGVycygpLmluZGV4T2YoJ0ludm9pY2UgRGF0ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZFtkYXRlSW5kZXhdICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFtkYXRlSW5kZXhdID0gcGFyc2VBbmRGb3JtYXREYXRlKG5vcm1hbGl6ZWRbZGF0ZUluZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RvcmVkRGF0YSgnZ3N0cjNiRGF0YScsIGdzdHIzYkRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGlzcGxheURhdGFBc3luYyhnc3RyM2JEYXRhLCAnZ3N0cjNiLWNvbnRhaW5lcicsIGdzdHIzYkhlYWRlcnMoKSwgJ2dzdHIzYicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcm9ncmVzcyg3NSwgJ1N0YXJ0aW5nIHJlY29uY2lsaWF0aW9uLi4uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlY29uY2lsZURhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMTAwLCAnQ29tcGxldGUhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVQcm9ncmVzcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMCwgJ0Vycm9yIHByb2Nlc3NpbmcgZmlsZScpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGhpZGVQcm9ncmVzcygpLCAyMDAwKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmaWxlOicsIGVycm9yKTsKICAgICAgICAgICAgICAgIGhpZGVQcm9ncmVzcygpOwogICAgICAgICAgICAgICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGRpc3BsYXlEYXRhQXN5bmMoZGF0YSwgY29udGFpbmVySWQsIGhlYWRlcnMsIHNoZWV0VHlwZSkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCk7CiAgICAgICAgICAgIGNvbnN0IGlzRnJlZVNlcnZpY2UgPSBnZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIikgPT09ICJ0cnVlIiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBQcm9jZXNzIGluIHNtYWxsZXIgY2h1bmtzIGZvciBkaXNwbGF5CiAgICAgICAgICAgIGNvbnN0IERJU1BMQVlfQ0hVTktfU0laRSA9IDUwOwogICAgICAgICAgICBsZXQgaHRtbCA9ICc8dGFibGU+PHRoZWFkPjx0cj4nOwogICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goaGVhZGVyID0+IGh0bWwgKz0gYDx0aD4ke2hlYWRlcn08L3RoPmApOwogICAgICAgICAgICBodG1sICs9ICc8L3RyPjwvdGhlYWQ+PHRib2R5Pic7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IERJU1BMQVlfQ0hVTktfU0laRSkgewogICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBkYXRhLnNsaWNlKGksIGkgKyBESVNQTEFZX0NIVU5LX1NJWkUpOwogICAgICAgICAgICAgICAgY2h1bmsuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJvd0luZGV4ID0gaSArIHJvd0luZGV4OwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ciBkYXRhLXJvdz0iJHthY3R1YWxSb3dJbmRleH0iIGRhdGEtc2hlZXQ9IiR7c2hlZXRUeXBlfSI+YDsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKF8sIGNvbEluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dbY29sSW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0RhdGVDb2x1bW4gPSBoZWFkZXJzW2NvbEluZGV4XSA9PT0gJ0ludm9pY2UgRGF0ZScgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2NvbEluZGV4XSA9PT0gJ0dTVFItMS81IEZpbGluZyBEYXRlJyB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbY29sSW5kZXhdID09PSAnSVJOIERhdGUnOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGlzRGF0ZUNvbHVtbiA/IHBhcnNlQW5kRm9ybWF0RGF0ZShjZWxsKSA6IChjZWxsID09PSB1bmRlZmluZWQgfHwgY2VsbCA9PT0gbnVsbCA/ICcnIDogY2VsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRWRpdGFibGUgPSBjb2xJbmRleCA+IDAgJiYgIWlzRnJlZVNlcnZpY2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ZCBjb250ZW50ZWRpdGFibGU9IiR7aXNFZGl0YWJsZX0iIGRhdGEtY29sPSIke2NvbEluZGV4fSI+JHt2YWx1ZX08L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC90cj4nOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEFsbG93IFVJIHRvIHVwZGF0ZSBiZXR3ZWVuIGNodW5rcwogICAgICAgICAgICAgICAgaWYgKGkgJSAoRElTUExBWV9DSFVOS19TSVpFICogNCkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBodG1sICs9ICc8L3Rib2R5PjwvdGFibGU+JzsKICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB0YWJsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0YWJsZScpOwogICAgICAgICAgICB0YWJsZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUNlbGxFZGl0KTsKICAgICAgICAgICAgaWYgKGZpbHRlckVuYWJsZWQpIHRvZ2dsZUZpbHRlcnMoKTsKCiAgICAgICAgICAgIGlmIChpc0ZyZWVTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoInRkIik7CiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4gewogICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCAiZmFsc2UiKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYXBwbHlGcmVlU2VydmljZUNvbG9ycygpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaXNwbGF5RGF0YShkYXRhLCBjb250YWluZXJJZCwgaGVhZGVycywgc2hlZXRUeXBlKSB7CiAgICAgICAgICAgIGRpc3BsYXlEYXRhQXN5bmMoZGF0YSwgY29udGFpbmVySWQsIGhlYWRlcnMsIHNoZWV0VHlwZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVDZWxsRWRpdChldmVudCkgewogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgICAgIGNvbnN0IGlzRnJlZVNlcnZpY2UgPSBnZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIikgPT09ICJ0cnVlIiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSI7CgogICAgICAgICAgICBpZiAoaXNGcmVlU2VydmljZSkgewogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIHRhcmdldC5ibHVyKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ1REJyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ3RydWUnKSB7CiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1yb3cnKSwgMTApOwogICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpLCAxMCk7CiAgICAgICAgICAgICAgICBjb25zdCBzaGVldFR5cGUgPSB0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hlZXQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBzaGVldFR5cGUgPT09ICdnc3RyMmInID8gZ3N0cjJiSGVhZGVycygpIDogZ3N0cjNiSGVhZGVycygpOwogICAgICAgICAgICAgICAgY29uc3QgaXNEYXRlQ29sdW1uID0gaGVhZGVyc1tjb2xJbmRleF0gPT09ICdJbnZvaWNlIERhdGUnIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbY29sSW5kZXhdID09PSAnR1NUUi0xLzUgRmlsaW5nIERhdGUnIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbY29sSW5kZXhdID09PSAnSVJOIERhdGUnOwogICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gdGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgLy8gICBpZiAoaXNEYXRlQ29sdW1uICYmIG5ld1ZhbHVlICE9PSAnJykgewogICAgICAgICAgICAvLyAgICAgICAgbmV3VmFsdWUgPSBwYXJzZUFuZEZvcm1hdERhdGUobmV3VmFsdWUpOwogICAgICAgICAgICAgLy8gICAgICAgdGFyZ2V0LnRleHRDb250ZW50ID0gbmV3VmFsdWU7CiAgICAgICAgICAgIC8vICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc2hlZXRUeXBlID09PSAnZ3N0cjJiJykgewogICAgICAgICAgICAgICAgICAgIGdzdHIyYkRhdGFbcm93SW5kZXhdW2NvbEluZGV4XSA9IG5ld1ZhbHVlOwogICAgICAgICAgICAgICAgICAgIHNldFN0b3JlZERhdGEoJ2dzdHIyYkRhdGEnLCBnc3RyMmJEYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXRUeXBlID09PSAnZ3N0cjNiJykgewogICAgICAgICAgICAgICAgICAgIGdzdHIzYkRhdGFbcm93SW5kZXhdW2NvbEluZGV4XSA9IG5ld1ZhbHVlOwogICAgICAgICAgICAgICAgICAgIHNldFN0b3JlZERhdGEoJ2dzdHIzYkRhdGEnLCBnc3RyM2JEYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRGVib3VuY2VkIHJlY29uY2lsaWF0aW9uIGZvciBwZXJmb3JtYW5jZQogICAgICAgICAvLyAgICAgICBkZWJvdW5jZShyZWNvbmNpbGVEYXRhLCAxMDAwKSgpOwogICAgICAgICAgICAgICAgaWYgKGZpbHRlckVuYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsdGVycyhzaGVldFR5cGUgPT09ICdnc3RyMmInID8gJ2dzdHIyYi1jb250YWluZXInIDogJ2dzdHIzYi1jb250YWluZXInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaEZpbHRlcnMoY29udGFpbmVySWQpIHsKICAgICAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCkucXVlcnlTZWxlY3RvcigndGFibGUnKTsKICAgICAgICAgICAgaWYgKHRhYmxlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGhlYWQgdGgnKTsKICAgICAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaCgodGgsIGNvbEluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB0aC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLWRyb3Bkb3duJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNEaXYgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLW9wdGlvbnMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVGaWx0ZXJPcHRpb25zKG9wdGlvbnNEaXYsIGNvbnRhaW5lcklkLCBjb2xJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5RmlsdGVycyhjb250YWluZXJJZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlY29uY2lsZURhdGEoKSB7CiAgICAgICAgICAgIGlmIChpc1Byb2Nlc3NpbmcpIHJldHVybjsKICAgICAgICAgICAgaWYgKGdzdHIyYkRhdGEubGVuZ3RoID09PSAwICYmIGdzdHIzYkRhdGEubGVuZ3RoID09PSAwKSByZXR1cm47CgogICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSB0cnVlOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzcyBmb3IgbGFyZ2UgZGF0YXNldHMKICAgICAgICAgICAgaWYgKGdzdHIyYkRhdGEubGVuZ3RoID4gMjAwIHx8IGdzdHIzYkRhdGEubGVuZ3RoID4gMjAwKSB7CiAgICAgICAgICAgICAgICBzaG93UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKDAsICdTdGFydGluZyByZWNvbmNpbGlhdGlvbi4uLicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgZGlmZklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmYtYWxsb3dlZCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZGlmZkFsbG93ZWQgPSBkaWZmSW5wdXQgPT09ICcnID8gMCA6IE51bWJlcihkaWZmSW5wdXQpIHx8IDE7CiAgICAgICAgICAgICAgICBjb25zdCBnc3RyMmJUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnc3RyMmItY29udGFpbmVyIHRhYmxlIHRib2R5Jyk7CiAgICAgICAgICAgICAgICBjb25zdCBnc3RyM2JUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnc3RyM2ItY29udGFpbmVyIHRhYmxlIHRib2R5Jyk7CiAgICAgICAgICAgICAgICBjb25zdCByZWNvbmNpbGVkMmJEYXRhID0gW107CiAgICAgICAgICAgICAgICBjb25zdCByZWNvbmNpbGVkM2JEYXRhID0gW107CgogICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBHU1RSLTJCIGRhdGEgaW4gY2h1bmtzCiAgICAgICAgICAgICAgICB1cGRhdGVQcm9ncmVzcygyMCwgJ1JlY29uY2lsaW5nIEdTVFItMkIgZGF0YS4uLicpOwogICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7CgogICAgICAgICAgICAgICAgY29uc3QgcHJvY2VzczJiQ2h1bmsgPSBhc3luYyAoY2h1bmssIGNodW5rSW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsubWFwKChyb3csIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbEluZGV4ID0gY2h1bmtJbmRleCAqIENIVU5LX1NJWkUgKyBpbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBmaW5kTWF0Y2gocm93LCBnc3RyMmJEYXRhLCBnc3RyM2JEYXRhLCBmYWxzZSwgZGlmZkFsbG93ZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSBbbWF0Y2gsIC4uLnJvdy5zbGljZSgxKV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29uY2lsZWQyYkRhdGFbYWN0dWFsSW5kZXhdID0gbmV3Um93OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3N0cjJiVGFibGUgJiYgZ3N0cjJiVGFibGUucm93c1thY3R1YWxJbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJvdyhnc3RyMmJUYWJsZS5yb3dzW2FjdHVhbEluZGV4XSwgbmV3Um93KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Um93OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBhd2FpdCBwcm9jZXNzSW5DaHVua3MoZ3N0cjJiRGF0YSwgcHJvY2VzczJiQ2h1bmspOwoKICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgR1NUUi0zQiBkYXRhIGluIGNodW5rcwogICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoNjAsICdSZWNvbmNpbGluZyBHU1RSLTNCIGRhdGEuLi4nKTsKICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpOwoKICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3MzYkNodW5rID0gYXN5bmMgKGNodW5rLCBjaHVua0luZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rLm1hcCgocm93LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxJbmRleCA9IGNodW5rSW5kZXggKiBDSFVOS19TSVpFICsgaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZmluZE1hdGNoKHJvdywgZ3N0cjNiRGF0YSwgZ3N0cjJiRGF0YSwgdHJ1ZSwgZGlmZkFsbG93ZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSBbbWF0Y2gsIC4uLnJvdy5zbGljZSgxKV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29uY2lsZWQzYkRhdGFbYWN0dWFsSW5kZXhdID0gbmV3Um93OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3N0cjNiVGFibGUgJiYgZ3N0cjNiVGFibGUucm93c1thY3R1YWxJbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJvdyhnc3RyM2JUYWJsZS5yb3dzW2FjdHVhbEluZGV4XSwgbmV3Um93KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Um93OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBhd2FpdCBwcm9jZXNzSW5DaHVua3MoZ3N0cjNiRGF0YSwgcHJvY2VzczNiQ2h1bmspOwoKICAgICAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKDgwLCAnR2VuZXJhdGluZyBzdW1tYXJ5Li4uJyk7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTsKCiAgICAgICAgICAgICAgICBkaXNwbGF5U3VtbWFyeShyZWNvbmNpbGVkMmJEYXRhLCByZWNvbmNpbGVkM2JEYXRhKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoOTAsICdQcmVwYXJpbmcgb3V0cHV0Li4uJyk7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdGVPdXRwdXQocmVjb25jaWxlZDJiRGF0YSwgcmVjb25jaWxlZDNiRGF0YSk7CgogICAgICAgICAgICAgICAgcmVzdHJpY3RGcmVlU2VydmljZUZlYXR1cmVzKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKDEwMCwgJ1JlY29uY2lsaWF0aW9uIGNvbXBsZXRlIScpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBoaWRlUHJvZ3Jlc3MoKSwgMTAwMCk7CgogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHJlY29uY2lsaWF0aW9uOicsIGVycm9yKTsKICAgICAgICAgICAgICAgIGhpZGVQcm9ncmVzcygpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgaXNQcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJvdyhyb3dFbGVtZW50LCBuZXdSb3cpIHsKICAgIGNvbnN0IG1hdGNoID0gbmV3Um93WzBdOwogICAgQXJyYXkuZnJvbShyb3dFbGVtZW50LmNlbGxzKS5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4gewogICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSBuZXdSb3dbaW5kZXhdOwogICAgfSk7CiAgICAvLyBTa2lwIGNvbG9yIGNvZGluZyBpZiBkYXRhc2V0IHNpemUgZXhjZWVkcyAxMDAwIHJvd3MKICAgIGlmIChnc3RyMmJEYXRhLmxlbmd0aCArIGdzdHIzYkRhdGEubGVuZ3RoIDw9IDEwMDApIHsKICAgICAgICBjb2xvclJvdyhyb3dFbGVtZW50LCBtYXRjaCk7CiAgICB9Cn0KCiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplSW52b2ljZU51bWJlcihpbnZOdW0pIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhpbnZOdW0pLnJlcGxhY2UoL1tcc1wvXFwuLCI/XCddL2csICcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmRNYXRjaChyb3csIHNvdXJjZURhdGEsIGNvbXBhcmVEYXRhLCBpczNiLCBkaWZmQWxsb3dlZCkgewogICAgICAgICAgICBjb25zdCBzb3VyY2VIZWFkZXJzID0gaXMzYiA/IGdzdHIzYkhlYWRlcnMoKSA6IGdzdHIyYkhlYWRlcnMoKTsKICAgICAgICAgICAgY29uc3QgY29tcGFyZUhlYWRlcnMgPSBpczNiID8gZ3N0cjJiSGVhZGVycygpIDogZ3N0cjNiSGVhZGVycygpOwogICAgICAgICAgICBjb25zdCBpbnZEYXRlSWR4ID0gc291cmNlSGVhZGVycy5pbmRleE9mKCdJbnZvaWNlIERhdGUnKTsKICAgICAgICAgICAgY29uc3QgZ3N0bklkeCA9IHNvdXJjZUhlYWRlcnMuaW5kZXhPZignR1NUTicpOwogICAgICAgICAgICBjb25zdCBpbnZOdW1JZHggPSBzb3VyY2VIZWFkZXJzLmluZGV4T2YoJ0ludm9pY2UgTnVtYmVyJyk7CiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVHc3RuSWR4ID0gY29tcGFyZUhlYWRlcnMuaW5kZXhPZignR1NUTicpOwogICAgICAgICAgICBjb25zdCBpbnZEYXRlID0gcGFyc2VBbmRGb3JtYXREYXRlKHJvd1tpbnZEYXRlSWR4XSkudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgIGNvbnN0IGdzdG4gPSBTdHJpbmcocm93W2dzdG5JZHhdKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgY29uc3QgaW52TnVtID0gbm9ybWFsaXplSW52b2ljZU51bWJlcihTdHJpbmcocm93W2ludk51bUlkeF0pKTsKCiAgICAgICAgICAgIC8vIDEuIE1hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUKICAgICAgICAgICAgY29uc3Qgc291cmNlVG90YWxzID0gY2FsY3VsYXRlVG90YWxzKHNvdXJjZURhdGEsIGludkRhdGUsIGdzdG4sIGludk51bSwgaXMzYik7CiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVUb3RhbHMgPSBjYWxjdWxhdGVUb3RhbHMoY29tcGFyZURhdGEsIGludkRhdGUsIGdzdG4sIGludk51bSwgIWlzM2IpOwogICAgICAgICAgICBpZiAoc291cmNlVG90YWxzLmNvdW50ID4gMCAmJiBjb21wYXJlVG90YWxzLmNvdW50ID4gMCkgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrVG90YWxzKHNvdXJjZVRvdGFscywgY29tcGFyZVRvdGFscywgZGlmZkFsbG93ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkID8gJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnIDogJ01hdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4gTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLgogICAgICAgICAgICBjb25zdCBpbnZUb3RhbHMgPSBjYWxjdWxhdGVUb3RhbHNCeUludihzb3VyY2VEYXRhLCBnc3RuLCBpbnZOdW0sIGlzM2IpOwogICAgICAgICAgICBjb25zdCBjb21wYXJlSW52VG90YWxzID0gY2FsY3VsYXRlVG90YWxzQnlJbnYoY29tcGFyZURhdGEsIGdzdG4sIGludk51bSwgIWlzM2IpOwogICAgICAgICAgICBpZiAoaW52VG90YWxzLmNvdW50ID4gMCAmJiBjb21wYXJlSW52VG90YWxzLmNvdW50ID4gMCkgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrVG90YWxzKGludlRvdGFscywgY29tcGFyZUludlRvdGFscywgZGlmZkFsbG93ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkID8gJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4nIDogJ01hdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMy4gTWF0Y2ggLSBHU1ROLCBEYXRlCiAgICAgICAgICAgIGNvbnN0IGdzdG5EYXRlVG90YWxzID0gY2FsY3VsYXRlVG90YWxzQnlHc3RuRGF0ZShzb3VyY2VEYXRhLCBpbnZEYXRlLCBnc3RuLCBpczNiKTsKICAgICAgICAgICAgY29uc3QgY29tcGFyZUdzdG5EYXRlVG90YWxzID0gY2FsY3VsYXRlVG90YWxzQnlHc3RuRGF0ZShjb21wYXJlRGF0YSwgaW52RGF0ZSwgZ3N0biwgIWlzM2IpOwogICAgICAgICAgICBpZiAoZ3N0bkRhdGVUb3RhbHMuY291bnQgPiAwICYmIGNvbXBhcmVHc3RuRGF0ZVRvdGFscy5jb3VudCA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChjaGVja1RvdGFscyhnc3RuRGF0ZVRvdGFscywgY29tcGFyZUdzdG5EYXRlVG90YWxzLCBkaWZmQWxsb3dlZCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGV0YWlsZWRSZWNvbmNpbGlhdGlvbkNoZWNrYm94LmNoZWNrZWQgPyAnTWF0Y2ggLSBHU1ROLCBEYXRlJyA6ICdNYXRjaCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIDQuIE1hdGNoIC0gR1NUTgogICAgICAgICAgICBjb25zdCBnc3RuVG90YWxzID0gY2FsY3VsYXRlVG90YWxzQnlHc3RuKHNvdXJjZURhdGEsIGdzdG4sIGlzM2IpOwogICAgICAgICAgICBjb25zdCBjb21wYXJlR3N0blRvdGFscyA9IGNhbGN1bGF0ZVRvdGFsc0J5R3N0bihjb21wYXJlRGF0YSwgZ3N0biwgIWlzM2IpOwogICAgICAgICAgICBpZiAoZ3N0blRvdGFscy5jb3VudCA+IDAgJiYgY29tcGFyZUdzdG5Ub3RhbHMuY291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoY2hlY2tUb3RhbHMoZ3N0blRvdGFscywgY29tcGFyZUdzdG5Ub3RhbHMsIGRpZmZBbGxvd2VkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guY2hlY2tlZCA/ICdNYXRjaCAtIEdTVE4nIDogJ01hdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gNS4gVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0CiAgICAgICAgICAgIGNvbnN0IGdzdG5FeGlzdHNJbkNvbXBhcmUgPSBjb21wYXJlRGF0YS5zb21lKHIgPT4gU3RyaW5nKHJbY29tcGFyZUdzdG5JZHhdKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ3N0bik7CiAgICAgICAgICAgIGlmICghZ3N0bkV4aXN0c0luQ29tcGFyZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyA2LiBVbm1hdGNoIC0gQW10IERpZmYKICAgICAgICAgICAgY29uc3QgYW10RGlmZlRvdGFscyA9IGNhbGN1bGF0ZVRvdGFsc0J5SW52KHNvdXJjZURhdGEsIGdzdG4sIGludk51bSwgaXMzYik7CiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVBbXREaWZmVG90YWxzID0gY2FsY3VsYXRlVG90YWxzQnlJbnYoY29tcGFyZURhdGEsIGdzdG4sIGludk51bSwgIWlzM2IpOwogICAgICAgICAgICBpZiAoYW10RGlmZlRvdGFscy5jb3VudCA+IDAgJiYgY29tcGFyZUFtdERpZmZUb3RhbHMuY291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrVG90YWxzKGFtdERpZmZUb3RhbHMsIGNvbXBhcmVBbXREaWZmVG90YWxzLCBkaWZmQWxsb3dlZCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1VubWF0Y2ggLSBBbXQgRGlmZic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIDcuIFVubWF0Y2gKICAgICAgICAgICAgcmV0dXJuICdVbm1hdGNoJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFscyhkYXRhLCBpbnZEYXRlLCBnc3RuLCBpbnZOdW0sIGlzM2IpIHsKICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGlzM2IgPyBnc3RyM2JIZWFkZXJzKCkgOiBnc3RyMmJIZWFkZXJzKCk7CiAgICAgICAgICAgIGNvbnN0IGludkRhdGVJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0ludm9pY2UgRGF0ZScpOwogICAgICAgICAgICBjb25zdCBnc3RuSWR4ID0gaGVhZGVycy5pbmRleE9mKCdHU1ROJyk7CiAgICAgICAgICAgIGNvbnN0IGludk51bUlkeCA9IGhlYWRlcnMuaW5kZXhPZignSW52b2ljZSBOdW1iZXInKTsKICAgICAgICAgICAgY29uc3QgdGF4YWJsZUlkeCA9IGhlYWRlcnMuaW5kZXhPZignVGF4YWJsZSBWYWx1ZScpOwogICAgICAgICAgICBjb25zdCBpZ3N0SWR4ID0gaGVhZGVycy5pbmRleE9mKCdJR1NUJyk7CiAgICAgICAgICAgIGNvbnN0IGNnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NHU1QnKTsKICAgICAgICAgICAgY29uc3Qgc2dzdElkeCA9IGhlYWRlcnMuaW5kZXhPZignU0dTVCcpOwogICAgICAgICAgICBjb25zdCBjZXNzSWR4ID0gaGVhZGVycy5pbmRleE9mKCdDRVNTJyk7CiAgICAgICAgICAgIGxldCBjb3VudCA9IDAsIHRheGFibGUgPSAwLCBpZ3N0ID0gMCwgY2dzdCA9IDAsIHNnc3QgPSAwLCBjZXNzID0gMDsKICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCByb3dEYXRlID0gcGFyc2VBbmRGb3JtYXREYXRlKHJvd1tpbnZEYXRlSWR4XSkudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgICAgICBpZiAocm93RGF0ZSA9PT0gaW52RGF0ZSAmJiAKICAgICAgICAgICAgICAgICAgICBTdHJpbmcocm93W2dzdG5JZHhdKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ3N0biAmJiAKICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVJbnZvaWNlTnVtYmVyKFN0cmluZyhyb3dbaW52TnVtSWR4XSkpID09PSBpbnZOdW0pIHsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgIHRheGFibGUgKz0gTnVtYmVyKHJvd1t0YXhhYmxlSWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBpZ3N0ICs9IE51bWJlcihyb3dbaWdzdElkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgY2dzdCArPSBOdW1iZXIocm93W2Nnc3RJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIHNnc3QgKz0gTnVtYmVyKHJvd1tzZ3N0SWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBjZXNzICs9IE51bWJlcihyb3dbY2Vzc0lkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4geyBjb3VudCwgdGF4YWJsZSwgaWdzdCwgY2dzdCwgc2dzdCwgY2VzcyB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxzQnlJbnYoZGF0YSwgZ3N0biwgaW52TnVtLCBpczNiKSB7CiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBpczNiID8gZ3N0cjNiSGVhZGVycygpIDogZ3N0cjJiSGVhZGVycygpOwogICAgICAgICAgICBjb25zdCBnc3RuSWR4ID0gaGVhZGVycy5pbmRleE9mKCdHU1ROJyk7CiAgICAgICAgICAgIGNvbnN0IGludk51bUlkeCA9IGhlYWRlcnMuaW5kZXhPZignSW52b2ljZSBOdW1iZXInKTsKICAgICAgICAgICAgY29uc3QgdGF4YWJsZUlkeCA9IGhlYWRlcnMuaW5kZXhPZignVGF4YWJsZSBWYWx1ZScpOwogICAgICAgICAgICBjb25zdCBpZ3N0SWR4ID0gaGVhZGVycy5pbmRleE9mKCdJR1NUJyk7CiAgICAgICAgICAgIGNvbnN0IGNnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NHU1QnKTsKICAgICAgICAgICAgY29uc3Qgc2dzdElkeCA9IGhlYWRlcnMuaW5kZXhPZignU0dTVCcpOwogICAgICAgICAgICBjb25zdCBjZXNzSWR4ID0gaGVhZGVycy5pbmRleE9mKCdDRVNTJyk7CiAgICAgICAgICAgIGxldCBjb3VudCA9IDAsIHRheGFibGUgPSAwLCBpZ3N0ID0gMCwgY2dzdCA9IDAsIHNnc3QgPSAwLCBjZXNzID0gMDsKICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgICAgICBpZiAoU3RyaW5nKHJvd1tnc3RuSWR4XSkudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGdzdG4gJiYgCiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplSW52b2ljZU51bWJlcihTdHJpbmcocm93W2ludk51bUlkeF0pKSA9PT0gaW52TnVtKSB7CiAgICAgICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgICAgICB0YXhhYmxlICs9IE51bWJlcihyb3dbdGF4YWJsZUlkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgaWdzdCArPSBOdW1iZXIocm93W2lnc3RJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGNnc3QgKz0gTnVtYmVyKHJvd1tjZ3N0SWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBzZ3N0ICs9IE51bWJlcihyb3dbc2dzdElkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgY2VzcyArPSBOdW1iZXIocm93W2Nlc3NJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHsgY291bnQsIHRheGFibGUsIGlnc3QsIGNnc3QsIHNnc3QsIGNlc3MgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFsc0J5R3N0bkRhdGUoZGF0YSwgaW52RGF0ZSwgZ3N0biwgaXMzYikgewogICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gaXMzYiA/IGdzdHIzYkhlYWRlcnMoKSA6IGdzdHIyYkhlYWRlcnMoKTsKICAgICAgICAgICAgY29uc3QgaW52RGF0ZUlkeCA9IGhlYWRlcnMuaW5kZXhPZignSW52b2ljZSBEYXRlJyk7CiAgICAgICAgICAgIGNvbnN0IGdzdG5JZHggPSBoZWFkZXJzLmluZGV4T2YoJ0dTVE4nKTsKICAgICAgICAgICAgY29uc3QgdGF4YWJsZUlkeCA9IGhlYWRlcnMuaW5kZXhPZignVGF4YWJsZSBWYWx1ZScpOwogICAgICAgICAgICBjb25zdCBpZ3N0SWR4ID0gaGVhZGVycy5pbmRleE9mKCdJR1NUJyk7CiAgICAgICAgICAgIGNvbnN0IGNnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NHU1QnKTsKICAgICAgICAgICAgY29uc3Qgc2dzdElkeCA9IGhlYWRlcnMuaW5kZXhPZignU0dTVCcpOwogICAgICAgICAgICBjb25zdCBjZXNzSWR4ID0gaGVhZGVycy5pbmRleE9mKCdDRVNTJyk7CiAgICAgICAgICAgIGxldCBjb3VudCA9IDAsIHRheGFibGUgPSAwLCBpZ3N0ID0gMCwgY2dzdCA9IDAsIHNnc3QgPSAwLCBjZXNzID0gMDsKICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCByb3dEYXRlID0gcGFyc2VBbmRGb3JtYXREYXRlKHJvd1tpbnZEYXRlSWR4XSkudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgICAgICBpZiAocm93RGF0ZSA9PT0gaW52RGF0ZSAmJiAKICAgICAgICAgICAgICAgICAgICBTdHJpbmcocm93W2dzdG5JZHhdKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ3N0bikgewogICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgdGF4YWJsZSArPSBOdW1iZXIocm93W3RheGFibGVJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGlnc3QgKz0gTnVtYmVyKHJvd1tpZ3N0SWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBjZ3N0ICs9IE51bWJlcihyb3dbY2dzdElkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgc2dzdCArPSBOdW1iZXIocm93W3Nnc3RJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGNlc3MgKz0gTnVtYmVyKHJvd1tjZXNzSWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB7IGNvdW50LCB0YXhhYmxlLCBpZ3N0LCBjZ3N0LCBzZ3N0LCBjZXNzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb3RhbHNCeUdzdG4oZGF0YSwgZ3N0biwgaXMzYikgewogICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gaXMzYiA/IGdzdHIzYkhlYWRlcnMoKSA6IGdzdHIyYkhlYWRlcnMoKTsKICAgICAgICAgICAgY29uc3QgZ3N0bklkeCA9IGhlYWRlcnMuaW5kZXhPZignR1NUTicpOwogICAgICAgICAgICBjb25zdCB0YXhhYmxlSWR4ID0gaGVhZGVycy5pbmRleE9mKCdUYXhhYmxlIFZhbHVlJyk7CiAgICAgICAgICAgIGNvbnN0IGlnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0lHU1QnKTsKICAgICAgICAgICAgY29uc3QgY2dzdElkeCA9IGhlYWRlcnMuaW5kZXhPZignQ0dTVCcpOwogICAgICAgICAgICBjb25zdCBzZ3N0SWR4ID0gaGVhZGVycy5pbmRleE9mKCdTR1NUJyk7CiAgICAgICAgICAgIGNvbnN0IGNlc3NJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NFU1MnKTsKICAgICAgICAgICAgbGV0IGNvdW50ID0gMCwgdGF4YWJsZSA9IDAsIGlnc3QgPSAwLCBjZ3N0ID0gMCwgc2dzdCA9IDAsIGNlc3MgPSAwOwogICAgICAgICAgICBkYXRhLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICAgIGlmIChTdHJpbmcocm93W2dzdG5JZHhdKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ3N0bikgewogICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgdGF4YWJsZSArPSBOdW1iZXIocm93W3RheGFibGVJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGlnc3QgKz0gTnVtYmVyKHJvd1tpZ3N0SWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBjZ3N0ICs9IE51bWJlcihyb3dbY2dzdElkeF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgc2dzdCArPSBOdW1iZXIocm93W3Nnc3RJZHhdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGNlc3MgKz0gTnVtYmVyKHJvd1tjZXNzSWR4XSkgfHwgMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB7IGNvdW50LCB0YXhhYmxlLCBpZ3N0LCBjZ3N0LCBzZ3N0LCBjZXNzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjaGVja1RvdGFscyhzb3VyY2UsIGNvbXBhcmUsIGRpZmZBbGxvd2VkKSB7CiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhzb3VyY2UudGF4YWJsZSAtIGNvbXBhcmUudGF4YWJsZSkgPD0gZGlmZkFsbG93ZWQgJiYKICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKHNvdXJjZS5pZ3N0IC0gY29tcGFyZS5pZ3N0KSA8PSBkaWZmQWxsb3dlZCAmJgogICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoc291cmNlLmNnc3QgLSBjb21wYXJlLmNnc3QpIDw9IGRpZmZBbGxvd2VkICYmCiAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhzb3VyY2Uuc2dzdCAtIGNvbXBhcmUuc2dzdCkgPD0gZGlmZkFsbG93ZWQgJiYKICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKHNvdXJjZS5jZXNzIC0gY29tcGFyZS5jZXNzKSA8PSBkaWZmQWxsb3dlZDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFwcGx5RnJlZVNlcnZpY2VDb2xvcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGlzRnJlZVNlcnZpY2UgPSBnZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIikgPT09ICJ0cnVlIiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSI7CiAgICAgICAgICAgIGlmICghaXNGcmVlU2VydmljZSkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgdGFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2dzdHIyYi1jb250YWluZXIgdGFibGUsICNnc3RyM2ItY29udGFpbmVyIHRhYmxlLCAjc3VtbWFyeS1jb250YWluZXIgdGFibGUiKTsKICAgICAgICAgICAgdGFibGVzLmZvckVhY2godGFibGUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoInRib2R5IHRyIik7CiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJvdy5jZWxsc1swXS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gJyNmMGYwZjAnOwogICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0Q29sb3IgPSAnYmxhY2snOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlsZWRSZWNvbmNpbGlhdGlvbkNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiwgRGF0ZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyMwMGNlZDEnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnIzRiMDA4Mic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ01hdGNoIC0gR1NUTiwgRGF0ZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyMzMmNkMzInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZmZiZjAwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3IgPSAnYmxhY2snOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2RjMTQzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2ggLSBBbXQgRGlmZic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjQ1MDAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdVbm1hdGNoJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmMDBmZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjAwZmYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyMwMGNlZDEnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZGMxNDNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3IgPSAnd2hpdGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVW5tYXRjaCAtIEFtdCBEaWZmJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmNDUwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2gnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZmYwMGZmJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3IgPSAnd2hpdGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmMDBmZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgidGQiKTsKICAgICAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5jb2xvciA9IHRleHRDb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gJ25vcm1hbCc7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb2xvclJvdyhyb3dFbGVtZW50LCBtYXRjaCkgewogICAgICAgICAgICByb3dFbGVtZW50LmNsYXNzTmFtZSA9ICcnOwogICAgICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gJyc7CiAgICAgICAgICAgIGxldCB0ZXh0Q29sb3IgPSAnd2hpdGUnOwoKICAgICAgICAgICAgaWYgKGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiwgRGF0ZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjMDBjZWQxJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLic6CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjNGIwMDgyJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWF0Y2ggLSBHU1ROLCBEYXRlJzoKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyMzMmNkMzInOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4nOgogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmYmYwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICdibGFjayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZGMxNDNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVW5tYXRjaCAtIEFtdCBEaWZmJzoKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjQ1MDAnOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmMDBmZic7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ01hdGNoJzoKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyMwMGNlZDEnOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOgogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2RjMTQzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2ggLSBBbXQgRGlmZic6CiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZmY0NTAwJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjAwZmYnOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgQXJyYXkuZnJvbShyb3dFbGVtZW50LmNlbGxzKS5mb3JFYWNoKGNlbGwgPT4gewogICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7CiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmNvbG9yID0gdGV4dENvbG9yOwogICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gJ25vcm1hbCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlU3VtbWFyeShkYXRhLCBpczNiKSB7CiAgICBjb25zdCBoZWFkZXJzID0gaXMzYiA/IGdzdHIzYkhlYWRlcnMoKSA6IGdzdHIyYkhlYWRlcnMoKTsKICAgIGNvbnN0IHRheGFibGVJZHggPSBoZWFkZXJzLmluZGV4T2YoJ1RheGFibGUgVmFsdWUnKTsKICAgIGNvbnN0IGlnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0lHU1QnKTsKICAgIGNvbnN0IGNnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NHU1QnKTsKICAgIGNvbnN0IHNnc3RJZHggPSBoZWFkZXJzLmluZGV4T2YoJ1NHU1QnKTsKICAgIGNvbnN0IGNlc3NJZHggPSBoZWFkZXJzLmluZGV4T2YoJ0NFU1MnKTsKICAgIGNvbnN0IGNyaXRlcmlhID0gZGV0YWlsZWRSZWNvbmNpbGlhdGlvbkNoZWNrYm94LmNoZWNrZWQgPwogICAgICAgIFsnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiwgRGF0ZScsICdNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uJywgJ01hdGNoIC0gR1NUTiwgRGF0ZScsICdNYXRjaCAtIEdTVE4nLCAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JywgJ1VubWF0Y2ggLSBBbXQgRGlmZicsICdVbm1hdGNoJ10gOgogICAgICAgIFsnTWF0Y2gnLCAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JywgJ1VubWF0Y2ggLSBBbXQgRGlmZicsICdVbm1hdGNoJ107CiAgICBjb25zdCBzdW1tYXJ5ID0ge307CiAgICBjcml0ZXJpYS5mb3JFYWNoKGNyaXRlcmlvbiA9PiB7CiAgICAgICAgc3VtbWFyeVtjcml0ZXJpb25dID0geyB0YXhhYmxlOiAwLCBpZ3N0OiAwLCBjZ3N0OiAwLCBzZ3N0OiAwLCBjZXNzOiAwIH07CiAgICB9KTsKICAgIGRhdGEuZm9yRWFjaChyb3cgPT4gewogICAgICAgIGxldCBtYXRjaCA9IHJvd1swXTsKICAgICAgICBpZiAoIWRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkICYmIAogICAgICAgICAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLicsICdNYXRjaCAtIEdTVE4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROJ10uaW5jbHVkZXMobWF0Y2gpKSB7CiAgICAgICAgICAgIG1hdGNoID0gJ01hdGNoJzsKICAgICAgICB9CiAgICAgICAgaWYgKHN1bW1hcnlbbWF0Y2hdKSB7CiAgICAgICAgICAgIHN1bW1hcnlbbWF0Y2hdLnRheGFibGUgKz0gTnVtYmVyKHJvd1t0YXhhYmxlSWR4XSkgfHwgMDsgLy8gUmVtb3ZlZCArMQogICAgICAgICAgICBzdW1tYXJ5W21hdGNoXS5pZ3N0ICs9IE51bWJlcihyb3dbaWdzdElkeF0pIHx8IDA7IC8vIFJlbW92ZWQgKzEKICAgICAgICAgICAgc3VtbWFyeVttYXRjaF0uY2dzdCArPSBOdW1iZXIocm93W2Nnc3RJZHhdKSB8fCAwOyAvLyBSZW1vdmVkICsxCiAgICAgICAgICAgIHN1bW1hcnlbbWF0Y2hdLnNnc3QgKz0gTnVtYmVyKHJvd1tzZ3N0SWR4XSkgfHwgMDsgLy8gUmVtb3ZlZCArMQogICAgICAgICAgICBzdW1tYXJ5W21hdGNoXS5jZXNzICs9IE51bWJlcihyb3dbY2Vzc0lkeF0pIHx8IDA7IC8vIFJlbW92ZWQgKzEKICAgICAgICB9CiAgICB9KTsKICAgIGNvbnN0IHRvdGFsID0geyB0YXhhYmxlOiAwLCBpZ3N0OiAwLCBjZ3N0OiAwLCBzZ3N0OiAwLCBjZXNzOiAwIH07CiAgICBjcml0ZXJpYS5mb3JFYWNoKGNyaXRlcmlvbiA9PiB7CiAgICAgICAgdG90YWwudGF4YWJsZSArPSBzdW1tYXJ5W2NyaXRlcmlvbl0udGF4YWJsZTsKICAgICAgICB0b3RhbC5pZ3N0ICs9IHN1bW1hcnlbY3JpdGVyaW9uXS5pZ3N0OwogICAgICAgIHRvdGFsLmNnc3QgKz0gc3VtbWFyeVtjcml0ZXJpb25dLmNnc3Q7CiAgICAgICAgdG90YWwuc2dzdCArPSBzdW1tYXJ5W2NyaXRlcmlvbl0uc2dzdDsKICAgICAgICB0b3RhbC5jZXNzICs9IHN1bW1hcnlbY3JpdGVyaW9uXS5jZXNzOwogICAgfSk7CiAgICByZXR1cm4geyBzdW1tYXJ5LCB0b3RhbCB9Owp9CgogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlTdW1tYXJ5KHJlY29uY2lsZWQyYkRhdGEsIHJlY29uY2lsZWQzYkRhdGEpIHsKICAgIGNvbnN0IGdzdHIyYlN1bW1hcnkgPSBjYWxjdWxhdGVTdW1tYXJ5KHJlY29uY2lsZWQyYkRhdGEsIGZhbHNlKTsKICAgIGNvbnN0IGdzdHIzYlN1bW1hcnkgPSBjYWxjdWxhdGVTdW1tYXJ5KHJlY29uY2lsZWQzYkRhdGEsIHRydWUpOwogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bW1hcnktY29udGFpbmVyJyk7CiAgICBsZXQgaHRtbCA9ICc8dGFibGU+PHRoZWFkPjx0cj4nOwogICAgaHRtbCArPSAnPHRoIHJvd3NwYW49IjIiPlBhcnRpY3VsYXJzPC90aD4nOwogICAgaHRtbCArPSAnPHRoIGNvbHNwYW49IjUiPkdTVCBQb3J0YWw8L3RoPic7CiAgICBodG1sICs9ICc8dGggY29sc3Bhbj0iNSI+Q2xpZW50IERhdGE8L3RoPic7CiAgICBodG1sICs9ICc8L3RyPjx0cj4nOwogICAgWydUYXhhYmxlIFZhbHVlJywgJ0lHU1QnLCAnQ0dTVCcsICdTR1NUJywgJ0NFU1MnXS5mb3JFYWNoKGhlYWRlciA9PiBodG1sICs9IGA8dGg+JHtoZWFkZXJ9PC90aD5gKTsKICAgIFsnVGF4YWJsZSBWYWx1ZScsICdJR1NUJywgJ0NHU1QnLCAnU0dTVCcsICdDRVNTJ10uZm9yRWFjaChoZWFkZXIgPT4gaHRtbCArPSBgPHRoPiR7aGVhZGVyfTwvdGg+YCk7CiAgICBodG1sICs9ICc8L3RyPjwvdGhlYWQ+PHRib2R5Pic7CiAgICBjb25zdCBjcml0ZXJpYSA9IGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkID8KICAgICAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLicsICdNYXRjaCAtIEdTVE4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROJywgJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCcsICdVbm1hdGNoIC0gQW10IERpZmYnLCAnVW5tYXRjaCddIDoKICAgICAgICBbJ01hdGNoJywgJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCcsICdVbm1hdGNoIC0gQW10IERpZmYnLCAnVW5tYXRjaCddOwogICAgCiAgICAvLyBDaGVjayBpZiBkYXRhc2V0IHNpemUgZXhjZWVkcyAxMDAwIHJvd3MKICAgIGNvbnN0IHNraXBDb2xvckNvZGluZyA9IChnc3RyMmJEYXRhLmxlbmd0aCArIGdzdHIzYkRhdGEubGVuZ3RoID4gMTAwMCk7CiAgICAKICAgIGNyaXRlcmlhLmZvckVhY2goY3JpdGVyaW9uID0+IHsKICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gc2tpcENvbG9yQ29kaW5nID8gJycgOiAnIzAwY2VkMSc7CiAgICAgICAgbGV0IHRleHRDb2xvciA9IHNraXBDb2xvckNvZGluZyA/ICdibGFjaycgOiAnd2hpdGUnOwogICAgICAgIGlmICghc2tpcENvbG9yQ29kaW5nICYmIGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICAgIHN3aXRjaCAoY3JpdGVyaW9uKSB7CiAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uLCBEYXRlJzoKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnIzAwY2VkMSc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4sIEludm9pY2UgTm8uJzoKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnIzRiMDA4Mic7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdNYXRjaCAtIEdTVE4sIERhdGUnOgogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjMzJjZDMyJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ01hdGNoIC0gR1NUTic6CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZmJmMDAnOwogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvciA9ICdibGFjayc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOgogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZGMxNDNjJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2ggLSBBbXQgRGlmZic6CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjQ1MDAnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmMDBmZic7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKCFza2lwQ29sb3JDb2RpbmcpIHsKICAgICAgICAgICAgc3dpdGNoIChjcml0ZXJpb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ01hdGNoJzoKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnIzAwY2VkMSc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOgogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9ICcjZGMxNDNjJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1VubWF0Y2ggLSBBbXQgRGlmZic6CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJyNmZjQ1MDAnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmMDBmZic7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaHRtbCArPSAnPHRyPic7CiAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAke2JhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3RleHRDb2xvcn07Ij4ke2NyaXRlcmlvbn08L3RkPmA7CiAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAke2JhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3RleHRDb2xvcn07Ij4keyhnc3RyMmJTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXT8udGF4YWJsZSB8fCAwKS50b0ZpeGVkKDIpfTwvdGQ+YDsKICAgICAgICBodG1sICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7YmFja2dyb3VuZENvbG9yfTsgY29sb3I6ICR7dGV4dENvbG9yfTsiPiR7KGdzdHIyYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dPy5pZ3N0IHx8IDApLnRvRml4ZWQoMil9PC90ZD5gOwogICAgICAgIGh0bWwgKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtiYWNrZ3JvdW5kQ29sb3J9OyBjb2xvcjogJHt0ZXh0Q29sb3J9OyI+JHsoZ3N0cjJiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0/LmNnc3QgfHwgMCkudG9GaXhlZCgyKX08L3RkPmA7CiAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAke2JhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3RleHRDb2xvcn07Ij4keyhnc3RyMmJTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXT8uc2dzdCB8fCAwKS50b0ZpeGVkKDIpfTwvdGQ+YDsKICAgICAgICBodG1sICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7YmFja2dyb3VuZENvbG9yfTsgY29sb3I6ICR7dGV4dENvbG9yfTsiPiR7KGdzdHIyYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dPy5jZXNzIHx8IDApLnRvRml4ZWQoMil9PC90ZD5gOwogICAgICAgIGh0bWwgKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtiYWNrZ3JvdW5kQ29sb3J9OyBjb2xvcjogJHt0ZXh0Q29sb3J9OyI+JHsoZ3N0cjNiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0/LnRheGFibGUgfHwgMCkudG9GaXhlZCgyKX08L3RkPmA7CiAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAke2JhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3RleHRDb2xvcn07Ij4keyhnc3RyM2JTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXT8uaWdzdCB8fCAwKS50b0ZpeGVkKDIpfTwvdGQ+YDsKICAgICAgICBodG1sICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7YmFja2dyb3VuZENvbG9yfTsgY29sb3I6ICR7dGV4dENvbG9yfTsiPiR7KGdzdHIzYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dPy5jZ3N0IHx8IDApLnRvRml4ZWQoMil9PC90ZD5gOwogICAgICAgIGh0bWwgKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtiYWNrZ3JvdW5kQ29sb3J9OyBjb2xvcjogJHt0ZXh0Q29sb3J9OyI+JHsoZ3N0cjNiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0/LnNnc3QgfHwgMCkudG9GaXhlZCgyKX08L3RkPmA7CiAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAke2JhY2tncm91bmRDb2xvcn07IGNvbG9yOiAke3RleHRDb2xvcn07Ij4keyhnc3RyM2JTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXT8uY2VzcyB8fCAwKS50b0ZpeGVkKDIpfTwvdGQ+YDsKICAgICAgICBodG1sICs9ICc8L3RyPic7CiAgICB9KTsKICAgIGh0bWwgKz0gJzx0ciBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7Ij4nOwogICAgaHRtbCArPSAnPHRkPjxzdHJvbmc+VG90YWw8L3N0cm9uZz48L3RkPic7CiAgICBodG1sICs9IGA8dGQ+PHN0cm9uZz4ke2dzdHIyYlN1bW1hcnkudG90YWwudGF4YWJsZS50b0ZpeGVkKDIpfTwvc3Ryb25nPjwvdGQ+YDsKICAgIGh0bWwgKz0gYDx0ZD48c3Ryb25nPiR7Z3N0cjJiU3VtbWFyeS50b3RhbC5pZ3N0LnRvRml4ZWQoMil9PC9zdHJvbmc+PC90ZD5gOwogICAgaHRtbCArPSBgPHRkPjxzdHJvbmc+JHtnc3RyMmJTdW1tYXJ5LnRvdGFsLmNnc3QudG9GaXhlZCgyKX08L3N0cm9uZz48L3RkPmA7CiAgICBodG1sICs9IGA8dGQ+PHN0cm9uZz4ke2dzdHIyYlN1bW1hcnkudG90YWwuc2dzdC50b0ZpeGVkKDIpfTwvc3Ryb25nPjwvdGQ+YDsKICAgIGh0bWwgKz0gYDx0ZD48c3Ryb25nPiR7Z3N0cjJiU3VtbWFyeS50b3RhbC5jZXNzLnRvRml4ZWQoMil9PC9zdHJvbmc+PC90ZD5gOwogICAgaHRtbCArPSBgPHRkPjxzdHJvbmc+JHtnc3RyM2JTdW1tYXJ5LnRvdGFsLnRheGFibGUudG9GaXhlZCgyKX08L3N0cm9uZz48L3RkPmA7CiAgICBodG1sICs9IGA8dGQ+PHN0cm9uZz4ke2dzdHIzYlN1bW1hcnkudG90YWwuaWdzdC50b0ZpeGVkKDIpfTwvc3Ryb25nPjwvdGQ+YDsKICAgIGh0bWwgKz0gYDx0ZD48c3Ryb25nPiR7Z3N0cjNiU3VtbWFyeS50b3RhbC5jZ3N0LnRvRml4ZWQoMil9PC9zdHJvbmc+PC90ZD5gOwogICAgaHRtbCArPSBgPHRkPjxzdHJvbmc+JHtnc3RyM2JTdW1tYXJ5LnRvdGFsLnNnc3QudG9GaXhlZCgyKX08L3N0cm9uZz48L3RkPmA7CiAgICBodG1sICs9IGA8dGQ+PHN0cm9uZz4ke2dzdHIzYlN1bW1hcnkudG90YWwuY2Vzcy50b0ZpeGVkKDIpfTwvc3Ryb25nPjwvdGQ+YDsKICAgIGh0bWwgKz0gJzwvdHI+JzsKICAgIGh0bWwgKz0gJzwvdGJvZHk+PC90YWJsZT4nOwogICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CgogICAgaWYgKChnZXRTdG9yZWREYXRhKCJpc0ZyZWVTZXJ2aWNlIikgPT09ICJ0cnVlIiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaXNGcmVlU2VydmljZSIpID09PSAidHJ1ZSIpICYmICFza2lwQ29sb3JDb2RpbmcpIHsKICAgICAgICBhcHBseUZyZWVTZXJ2aWNlQ29sb3JzKCk7CiAgICB9Cn0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVPdXRwdXQocmVjb25jaWxlZDJiRGF0YSwgcmVjb25jaWxlZDNiRGF0YSkgewogICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IG5ldyBFeGNlbEpTLldvcmtib29rKCk7CiAgICAgICAgICAgIGNvbnN0IHdzMSA9IHdvcmtib29rLmFkZFdvcmtzaGVldCgnR1NUIFBvcnRhbCcpOwogICAgICAgICAgICBjb25zdCBoZWFkZXJSb3cxID0gd3MxLmFkZFJvdyhnc3RyMmJIZWFkZXJzKCkpOwogICAgICAgICAgICBoZWFkZXJSb3cxLmVhY2hDZWxsKGNlbGwgPT4gewogICAgICAgICAgICAgICAgY2VsbC5maWxsID0geyB0eXBlOiAncGF0dGVybicsIHBhdHRlcm46ICdzb2xpZCcsIGZnQ29sb3I6IHsgYXJnYjogJ0ZGRTBGRkZGJyB9IH07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZWNvbmNpbGVkMmJEYXRhLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUm93ID0gcm93Lm1hcCgoY2VsbCwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNEYXRlQ29sdW1uID0gZ3N0cjJiSGVhZGVycygpW2lkeF0gPT09ICdJbnZvaWNlIERhdGUnIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnc3RyMmJIZWFkZXJzKClbaWR4XSA9PT0gJ0dTVFItMS81IEZpbGluZyBEYXRlJyB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3N0cjJiSGVhZGVycygpW2lkeF0gPT09ICdJUk4gRGF0ZSc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRGF0ZUNvbHVtbiAmJiBjZWxsICE9PSAnJyA/IHBhcnNlQW5kRm9ybWF0RGF0ZShjZWxsKSA6IChjZWxsID09PSB1bmRlZmluZWQgfHwgY2VsbCA9PT0gbnVsbCA/ICcnIDogY2VsbCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkUm93ID0gd3MxLmFkZFJvdyhleGNlbFJvdyk7CiAgICAgICAgICAgICAgICBhcHBseUV4Y2VsUm93Q29sb3IoYWRkZWRSb3csIHJvd1swXSwgZ3N0cjJiSGVhZGVycygpLmxlbmd0aCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB3czIgPSB3b3JrYm9vay5hZGRXb3Jrc2hlZXQoJ0NsaWVudCBEYXRhJyk7CiAgICAgICAgICAgIGNvbnN0IGhlYWRlclJvdzIgPSB3czIuYWRkUm93KGdzdHIzYkhlYWRlcnMoKSk7CiAgICAgICAgICAgIGhlYWRlclJvdzIuZWFjaENlbGwoY2VsbCA9PiB7CiAgICAgICAgICAgICAgICBjZWxsLmZpbGwgPSB7IHR5cGU6ICdwYXR0ZXJuJywgcGF0dGVybjogJ3NvbGlkJywgZmdDb2xvcjogeyBhcmdiOiAnRkZFMEZGRkYnIH0gfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlY29uY2lsZWQzYkRhdGEuZm9yRWFjaChyb3cgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZXhjZWxSb3cgPSByb3cubWFwKChjZWxsLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0RhdGVDb2x1bW4gPSBnc3RyM2JIZWFkZXJzKClbaWR4XSA9PT0gJ0ludm9pY2UgRGF0ZSc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRGF0ZUNvbHVtbiAmJiBjZWxsICE9PSAnJyA/IHBhcnNlQW5kRm9ybWF0RGF0ZShjZWxsKSA6IChjZWxsID09PSB1bmRlZmluZWQgfHwgY2VsbCA9PT0gbnVsbCA/ICcnIDogY2VsbCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkUm93ID0gd3MyLmFkZFJvdyhleGNlbFJvdyk7CiAgICAgICAgICAgICAgICBhcHBseUV4Y2VsUm93Q29sb3IoYWRkZWRSb3csIHJvd1swXSwgZ3N0cjNiSGVhZGVycygpLmxlbmd0aCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3Qgd3MzID0gd29ya2Jvb2suYWRkV29ya3NoZWV0KCdTdW1tYXJ5Jyk7CiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlIZWFkZXIxID0gd3MzLmFkZFJvdyhbJ1BhcnRpY3VsYXJzJywgJ0dTVCBQb3J0YWwnLCAnJywgJycsICcnLCAnJywgJ0NsaWVudCBEYXRhJywgJycsICcnLCAnJywgJyddKTsKICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUhlYWRlcjIgPSB3czMuYWRkUm93KFsnJywgJ1RheGFibGUgVmFsdWUnLCAnSUdTVCcsICdDR1NUJywgJ1NHU1QnLCAnQ0VTUycsICdUYXhhYmxlIFZhbHVlJywgJ0lHU1QnLCAnQ0dTVCcsICdTR1NUJywgJ0NFU1MnXSk7CiAgICAgICAgICAgIHdzMy5tZXJnZUNlbGxzKCdBMTpBMicpOwogICAgICAgICAgICB3czMubWVyZ2VDZWxscygnQjE6RjEnKTsKICAgICAgICAgICAgd3MzLm1lcmdlQ2VsbHMoJ0cxOksxJyk7CiAgICAgICAgICAgIFtzdW1tYXJ5SGVhZGVyMSwgc3VtbWFyeUhlYWRlcjJdLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICAgIHJvdy5lYWNoQ2VsbChjZWxsID0+IHsKICAgICAgICAgICAgICAgICAgICBjZWxsLmZpbGwgPSB7IHR5cGU6ICdwYXR0ZXJuJywgcGF0dGVybjogJ3NvbGlkJywgZmdDb2xvcjogeyBhcmdiOiAnRkZFMEZGRkYnIH0gfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgZ3N0cjJiU3VtbWFyeSA9IGNhbGN1bGF0ZVN1bW1hcnkocmVjb25jaWxlZDJiRGF0YSwgZmFsc2UpOwogICAgICAgICAgICBjb25zdCBnc3RyM2JTdW1tYXJ5ID0gY2FsY3VsYXRlU3VtbWFyeShyZWNvbmNpbGVkM2JEYXRhLCB0cnVlKTsKICAgICAgICAgICAgY29uc3QgY3JpdGVyaWEgPSBkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guY2hlY2tlZCA/CiAgICAgICAgICAgICAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLicsICdNYXRjaCAtIEdTVE4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROJywgJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCcsICdVbm1hdGNoIC0gQW10IERpZmYnLCAnVW5tYXRjaCddIDoKICAgICAgICAgICAgICAgIFsnTWF0Y2gnLCAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JywgJ1VubWF0Y2ggLSBBbXQgRGlmZicsICdVbm1hdGNoJ107CiAgICAgICAgICAgIGNyaXRlcmlhLmZvckVhY2goY3JpdGVyaW9uID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHdzMy5hZGRSb3coWwogICAgICAgICAgICAgICAgICAgIGNyaXRlcmlvbiwKICAgICAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXS50YXhhYmxlLAogICAgICAgICAgICAgICAgICAgIGdzdHIyYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dLmlnc3QsCiAgICAgICAgICAgICAgICAgICAgZ3N0cjJiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0uY2dzdCwKICAgICAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXS5zZ3N0LAogICAgICAgICAgICAgICAgICAgIGdzdHIyYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dLmNlc3MsCiAgICAgICAgICAgICAgICAgICAgZ3N0cjNiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0udGF4YWJsZSwKICAgICAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXS5pZ3N0LAogICAgICAgICAgICAgICAgICAgIGdzdHIzYlN1bW1hcnkuc3VtbWFyeVtjcml0ZXJpb25dLmNnc3QsCiAgICAgICAgICAgICAgICAgICAgZ3N0cjNiU3VtbWFyeS5zdW1tYXJ5W2NyaXRlcmlvbl0uc2dzdCwKICAgICAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnN1bW1hcnlbY3JpdGVyaW9uXS5jZXNzCiAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQXBwbHkgY29sb3IgdG8gc3VtbWFyeSByb3dzCiAgICAgICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guY2hlY2tlZCA/IHsKICAgICAgICAgICAgICAgICAgICAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLiwgRGF0ZSc6ICdGRjAwQ0VEMScsCiAgICAgICAgICAgICAgICAgICAgJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4nOiAnRkY0QjAwODInLAogICAgICAgICAgICAgICAgICAgICdNYXRjaCAtIEdTVE4sIERhdGUnOiAnRkYzMkNEMzInLAogICAgICAgICAgICAgICAgICAgICdNYXRjaCAtIEdTVE4nOiAnRkZGRkJGMDAnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOiAnRkZEQzE0M0MnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gQW10IERpZmYnOiAnRkZGRjQ1MDAnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoJzogJ0ZGRkYwMEZGJwogICAgICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICAgICAgICAnTWF0Y2gnOiAnRkYwMENFRDEnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOiAnRkZEQzE0M0MnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gQW10IERpZmYnOiAnRkZGRjQ1MDAnLAogICAgICAgICAgICAgICAgICAgICdVbm1hdGNoJzogJ0ZGRkYwMEZGJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb2xvcnNbY3JpdGVyaW9uXSB8fCAnRkZGRjAwRkYnOwogICAgICAgICAgICAgICAgcm93LmVhY2hDZWxsKGNlbGwgPT4gewogICAgICAgICAgICAgICAgICAgIGNlbGwuZmlsbCA9IHsgdHlwZTogJ3BhdHRlcm4nLCBwYXR0ZXJuOiAnc29saWQnLCBmZ0NvbG9yOiB7IGFyZ2I6IGNvbG9yIH0gfTsKICAgICAgICAgICAgICAgICAgICBjZWxsLmZvbnQgPSB7IGNvbG9yOiB7IGFyZ2I6ICdGRkZGRkZGRicgfSB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgdG90YWxSb3cgPSB3czMuYWRkUm93KFsKICAgICAgICAgICAgICAgICdUb3RhbCcsCiAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnRvdGFsLnRheGFibGUsCiAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnRvdGFsLmlnc3QsCiAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnRvdGFsLmNnc3QsCiAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnRvdGFsLnNnc3QsCiAgICAgICAgICAgICAgICBnc3RyMmJTdW1tYXJ5LnRvdGFsLmNlc3MsCiAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnRvdGFsLnRheGFibGUsCiAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnRvdGFsLmlnc3QsCiAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnRvdGFsLmNnc3QsCiAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnRvdGFsLnNnc3QsCiAgICAgICAgICAgICAgICBnc3RyM2JTdW1tYXJ5LnRvdGFsLmNlc3MKICAgICAgICAgICAgXSk7CgogICAgICAgICAgICB0b3RhbFJvdy5lYWNoQ2VsbChjZWxsID0+IHsgY2VsbC5mb250ID0geyBib2xkOiB0cnVlIH07IH0pOwogICAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCB3b3JrYm9vay54bHN4LndyaXRlQnVmZmVyKCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9KTsKICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1vdXRwdXQnKTsKICAgICAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gJ1JlY29uY2lsZWRfR1NUX0RhdGEueGxzeCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXQtbGluaycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXBwbHlFeGNlbFJvd0NvbG9yKHJvdywgbWF0Y2gsIGNvbHVtbkNvdW50KSB7CiAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IGRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkID8gewogICAgICAgICAgICAgICAgJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnOiAnRkYwMENFRDEnLAogICAgICAgICAgICAgICAgJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4nOiAnRkY0QjAwODInLAogICAgICAgICAgICAgICAgJ01hdGNoIC0gR1NUTiwgRGF0ZSc6ICdGRjMyQ0QzMicsCiAgICAgICAgICAgICAgICAnTWF0Y2ggLSBHU1ROJzogJ0ZGRkZCRjAwJywKICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gR1NUTiBOb3QgRXhpc3QnOiAnRkZEQzE0M0MnLAogICAgICAgICAgICAgICAgJ1VubWF0Y2ggLSBBbXQgRGlmZic6ICdGRkZGNDUwMCcsCiAgICAgICAgICAgICAgICAnVW5tYXRjaCc6ICdGRkZGMDBGRicKICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICAgICdNYXRjaCc6ICdGRjAwQ0VEMScsCiAgICAgICAgICAgICAgICAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JzogJ0ZGREMxNDNDJywKICAgICAgICAgICAgICAgICdVbm1hdGNoIC0gQW10IERpZmYnOiAnRkZGRjQ1MDAnLAogICAgICAgICAgICAgICAgJ1VubWF0Y2gnOiAnRkZGRjAwRkYnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gY29sb3JzW21hdGNoXSB8fCAnRkZGRjAwRkYnOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb2x1bW5Db3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93LmdldENlbGwoaSk7CiAgICAgICAgICAgICAgICBjZWxsLmZpbGwgPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhdHRlcm4nLAogICAgICAgICAgICAgICAgICAgIHBhdHRlcm46ICdzb2xpZCcsCiAgICAgICAgICAgICAgICAgICAgZmdDb2xvcjogeyBhcmdiOiBjb2xvciB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKChkZXRhaWxlZFJlY29uY2lsaWF0aW9uQ2hlY2tib3guY2hlY2tlZCAmJiAKICAgICAgICAgICAgICAgICAgICBbJ01hdGNoIC0gR1NUTiwgSW52b2ljZSBOby4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROLCBJbnZvaWNlIE5vLicsICdNYXRjaCAtIEdTVE4sIERhdGUnLCAnTWF0Y2ggLSBHU1ROJywgJ1VubWF0Y2ggLSBHU1ROIE5vdCBFeGlzdCcsICdVbm1hdGNoIC0gQW10IERpZmYnLCAnVW5tYXRjaCddLmluY2x1ZGVzKG1hdGNoKSkgfHwKICAgICAgICAgICAgICAgICAgICAoIWRldGFpbGVkUmVjb25jaWxpYXRpb25DaGVja2JveC5jaGVja2VkICYmIAogICAgICAgICAgICAgICAgICAgIFsnTWF0Y2gnLCAnVW5tYXRjaCAtIEdTVE4gTm90IEV4aXN0JywgJ1VubWF0Y2ggLSBBbXQgRGlmZicsICdVbm1hdGNoJ10uaW5jbHVkZXMobWF0Y2gpKSkgewogICAgICAgICAgICAgICAgICAgIGNlbGwuZm9udCA9IHsgY29sb3I6IHsgYXJnYjogJ0ZGRkZGRkZGJyB9IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEZpbHRlciBTdGF0ZQogICAgICAgIGxldCBmaWx0ZXJFbmFibGVkID0gZmFsc2U7CiAgICAgICAgY29uc3QgZmlsdGVycyA9IHt9OwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5hYmxlLWZpbHRlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZmlsdGVyRW5hYmxlZCA9IHRoaXMuY2hlY2tlZDsKICAgICAgICAgICAgdG9nZ2xlRmlsdGVycygpOwogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVGaWx0ZXJzKCkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXJzID0gWydnc3RyMmItY29udGFpbmVyJywgJ2dzdHIzYi1jb250YWluZXInXTsKICAgICAgICAgICAgY29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lcklkID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7CiAgICAgICAgICAgICAgICBpZiAodGFibGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGhlYWQgdGgnKTsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKHRoLCBjb2xJbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyRW5hYmxlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmlsdGVyRHJvcGRvd24odGgsIGNvbnRhaW5lcklkLCBjb2xJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGaWx0ZXJEcm9wZG93bih0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlckVuYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRGaWx0ZXJzKGNvbnRhaW5lcklkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkRmlsdGVyRHJvcGRvd24odGgsIGNvbnRhaW5lcklkLCBjb2xJbmRleCkgewogICAgICAgICAgICBpZiAodGgucXVlcnlTZWxlY3RvcignLmZpbHRlci1kcm9wZG93bicpKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGhlYWRlclRleHQgPSB0aC50ZXh0Q29udGVudC50cmltKCk7CiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRyb3Bkb3duLmNsYXNzTmFtZSA9ICdmaWx0ZXItZHJvcGRvd24nOwoKICAgICAgICAgICAgY29uc3QgZmlsdGVyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgIGZpbHRlckJ0bi5jbGFzc05hbWUgPSAnZmlsdGVyLWJ0bic7CiAgICAgICAgICAgIGZpbHRlckJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1maWx0ZXIiPjwvaT4nOyAvLyBGdW5uZWwgaWNvbiBhZGRlZAogICAgICAgICAgICBmaWx0ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0b2dnbGVEcm9wZG93bihkcm9wZG93bikpOwoKICAgICAgICAgICAgY29uc3QgZHJvcGRvd25Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc05hbWUgPSAnZmlsdGVyLWRyb3Bkb3duLWNvbnRlbnQnOwoKICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICBpbnB1dC50eXBlID0gJ3RleHQnOwogICAgICAgICAgICBpbnB1dC5jbGFzc05hbWUgPSAnZmlsdGVyLWlucHV0JzsKICAgICAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBgRmlsdGVyICR7aGVhZGVyVGV4dH1gOwogICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IGZpbHRlck9wdGlvbnMoaW5wdXQsIGRyb3Bkb3duQ29udGVudCwgY29udGFpbmVySWQsIGNvbEluZGV4KSk7CgogICAgICAgICAgICBjb25zdCBvcHRpb25zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG9wdGlvbnNEaXYuY2xhc3NOYW1lID0gJ2ZpbHRlci1vcHRpb25zJzsKICAgICAgICAgICAgcG9wdWxhdGVGaWx0ZXJPcHRpb25zKG9wdGlvbnNEaXYsIGNvbnRhaW5lcklkLCBjb2xJbmRleCk7CgogICAgICAgICAgICBjb25zdCBhY3Rpb25zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGFjdGlvbnNEaXYuY2xhc3NOYW1lID0gJ2ZpbHRlci1hY3Rpb25zJzsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9ICdTZWxlY3QgQWxsJzsKICAgICAgICAgICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2VsZWN0QWxsT3B0aW9ucyhvcHRpb25zRGl2LCBjb250YWluZXJJZCwgY29sSW5kZXgpKTsKICAgICAgICAgICAgY29uc3QgdW5jaGVja0FsbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICB1bmNoZWNrQWxsQnRuLnRleHRDb250ZW50ID0gJ1VuY2hlY2sgQWxsJzsKICAgICAgICAgICAgdW5jaGVja0FsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHVuY2hlY2tBbGxPcHRpb25zKG9wdGlvbnNEaXYsIGNvbnRhaW5lcklkLCBjb2xJbmRleCkpOwogICAgICAgICAgICBhY3Rpb25zRGl2LmFwcGVuZENoaWxkKHNlbGVjdEFsbEJ0bik7CiAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kQ2hpbGQodW5jaGVja0FsbEJ0bik7CgogICAgICAgICAgICBjb25zdCBzb3J0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHNvcnREaXYuY2xhc3NOYW1lID0gJ3NvcnQtYWN0aW9ucyc7CiAgICAgICAgICAgIGNvbnN0IHNvcnRBc2NCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgc29ydEFzY0J0bi50ZXh0Q29udGVudCA9ICdTb3J0IEEtWic7CiAgICAgICAgICAgIHNvcnRBc2NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzb3J0VGFibGUoY29udGFpbmVySWQsIGNvbEluZGV4LCAnYXNjJykpOwogICAgICAgICAgICBjb25zdCBzb3J0RGVzY0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICBzb3J0RGVzY0J0bi50ZXh0Q29udGVudCA9ICdTb3J0IFotQSc7CiAgICAgICAgICAgIHNvcnREZXNjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc29ydFRhYmxlKGNvbnRhaW5lcklkLCBjb2xJbmRleCwgJ2Rlc2MnKSk7CiAgICAgICAgICAgIHNvcnREaXYuYXBwZW5kQ2hpbGQoc29ydEFzY0J0bik7CiAgICAgICAgICAgIHNvcnREaXYuYXBwZW5kQ2hpbGQoc29ydERlc2NCdG4pOwoKICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LmFwcGVuZENoaWxkKG9wdGlvbnNEaXYpOwogICAgICAgICAgICBkcm9wZG93bkNvbnRlbnQuYXBwZW5kQ2hpbGQoYWN0aW9uc0Rpdik7CiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5hcHBlbmRDaGlsZChzb3J0RGl2KTsKICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZmlsdGVyQnRuKTsKICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZHJvcGRvd25Db250ZW50KTsKICAgICAgICAgICAgdGguYXBwZW5kQ2hpbGQoZHJvcGRvd24pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdW5jaGVja0FsbE9wdGlvbnMob3B0aW9uc0RpdiwgY29udGFpbmVySWQsIGNvbEluZGV4KSB7CiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBvcHRpb25zRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKTsKICAgICAgICAgICAgY2hlY2tib3hlcy5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSk7CiAgICAgICAgICAgIGFwcGx5RmlsdGVycyhjb250YWluZXJJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVGaWx0ZXJEcm9wZG93bih0aCkgewogICAgICAgICAgICBjb25zdCBkcm9wZG93biA9IHRoLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItZHJvcGRvd24nKTsKICAgICAgICAgICAgaWYgKGRyb3Bkb3duKSBkcm9wZG93bi5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZURyb3Bkb3duKGRyb3Bkb3duKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLWRyb3Bkb3duLWNvbnRlbnQnKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlci1kcm9wZG93bi1jb250ZW50LnNob3cnKS5mb3JFYWNoKG90aGVyRHJvcGRvd24gPT4gewogICAgICAgICAgICAgICAgaWYgKG90aGVyRHJvcGRvd24gIT09IGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICBvdGhlckRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVGaWx0ZXJPcHRpb25zKG9wdGlvbnNEaXYsIGNvbnRhaW5lcklkLCBjb2xJbmRleCkgewogICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpOwogICAgICAgICAgICBjb25zdCByb3dzID0gQXJyYXkuZnJvbSh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpKTsKICAgICAgICAgICAgY29uc3QgdW5pcXVlVmFsdWVzID0gbmV3IFNldChyb3dzLm1hcChyb3cgPT4gcm93LmNlbGxzW2NvbEluZGV4XS50ZXh0Q29udGVudC50cmltKCkpKTsKICAgICAgICAgICAgb3B0aW9uc0Rpdi5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgdW5pcXVlVmFsdWVzLmZvckVhY2godmFsdWUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NOYW1lID0gJ2ZpbHRlci1vcHRpb24nOwogICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7CiAgICAgICAgICAgICAgICBjaGVja2JveC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiBhcHBseUZpbHRlcnMoY29udGFpbmVySWQpKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gdmFsdWUgfHwgJyhCbGFuayknOwogICAgICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGNoZWNrYm94KTsKICAgICAgICAgICAgICAgIG9wdGlvbi5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICAgICAgICAgICAgICBvcHRpb25zRGl2LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc29ydFRhYmxlKGNvbnRhaW5lcklkLCBjb2xJbmRleCwgZGlyZWN0aW9uKSB7CiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7CiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5mcm9tKHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJykpOwoKICAgICAgICAgICAgcm93cy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBhVmFsdWUgPSBhLmNlbGxzW2NvbEluZGV4XS50ZXh0Q29udGVudC50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJWYWx1ZSA9IGIuY2VsbHNbY29sSW5kZXhdLnRleHRDb250ZW50LnRyaW0oKS50b0xvd2VyQ2FzZSgpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGlzR1NUTkNvbHVtbiA9IChjb250YWluZXJJZCA9PT0gJ2dzdHIyYi1jb250YWluZXInICYmIGNvbEluZGV4ID09PSAxKSB8fCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29udGFpbmVySWQgPT09ICdnc3RyM2ItY29udGFpbmVyJyAmJiBjb2xJbmRleCA9PT0gMik7CgogICAgICAgICAgICAgICAgaWYgKGlzR1NUTkNvbHVtbikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFTdGF0ZUNvZGUgPSBwYXJzZUludChhVmFsdWUuc2xpY2UoMCwgMiksIDEwKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiU3RhdGVDb2RlID0gcGFyc2VJbnQoYlZhbHVlLnNsaWNlKDAsIDIpLCAxMCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYVJlc3QgPSBhVmFsdWUuc2xpY2UoMik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYlJlc3QgPSBiVmFsdWUuc2xpY2UoMik7CgogICAgICAgICAgICAgICAgICAgIGlmIChhU3RhdGVDb2RlICE9PSBiU3RhdGVDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gYVN0YXRlQ29kZSAtIGJTdGF0ZUNvZGUgOiBiU3RhdGVDb2RlIC0gYVN0YXRlQ29kZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnIAogICAgICAgICAgICAgICAgICAgICAgICA/IGFSZXN0LmxvY2FsZUNvbXBhcmUoYlJlc3QsIHVuZGVmaW5lZCwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIDogYlJlc3QubG9jYWxlQ29tcGFyZShhUmVzdCwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgYU51bSA9IHBhcnNlRmxvYXQoYVZhbHVlKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJOdW0gPSBwYXJzZUZsb2F0KGJWYWx1ZSk7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGFOdW0pICYmICFpc05hTihiTnVtKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gYU51bSAtIGJOdW0gOiBiTnVtIC0gYU51bTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBhRGF0ZSA9IERhdGUucGFyc2UoYVZhbHVlKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJEYXRlID0gRGF0ZS5wYXJzZShiVmFsdWUpOwogICAgICAgICAgICAgICAgaWYgKCFpc05hTihhRGF0ZSkgJiYgIWlzTmFOKGJEYXRlKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gYURhdGUgLSBiRGF0ZSA6IGJEYXRlIC0gYURhdGU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgCiAgICAgICAgICAgICAgICAgICAgPyBhVmFsdWUubG9jYWxlQ29tcGFyZShiVmFsdWUsIHVuZGVmaW5lZCwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pCiAgICAgICAgICAgICAgICAgICAgOiBiVmFsdWUubG9jYWxlQ29tcGFyZShhVmFsdWUsIHVuZGVmaW5lZCwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGJvZHknKTsKICAgICAgICAgICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4gdGJvZHkuYXBwZW5kQ2hpbGQocm93KSk7CiAgICAgICAgICAgIGFwcGx5RmlsdGVycyhjb250YWluZXJJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKGlucHV0LCBkcm9wZG93bkNvbnRlbnQsIGNvbnRhaW5lcklkLCBjb2xJbmRleCkgewogICAgICAgICAgICBjb25zdCBmaWx0ZXJUZXh0ID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgY29uc3Qgb3B0aW9uc0RpdiA9IGRyb3Bkb3duQ29udGVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLW9wdGlvbnMnKTsKICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbnNEaXYucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlci1vcHRpb24nKTsKICAgICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IG9wdGlvbi5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICBvcHRpb24uc3R5bGUuZGlzcGxheSA9IGxhYmVsLmluY2x1ZGVzKGZpbHRlclRleHQpID8gJ2ZsZXgnIDogJ25vbmUnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXBwbHlGaWx0ZXJzKGNvbnRhaW5lcklkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFwcGx5RmlsdGVycyhjb250YWluZXJJZCkgewogICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpOwogICAgICAgICAgICBjb25zdCByb3dzID0gQXJyYXkuZnJvbSh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpKTsKICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZWFkIHRoJyk7CgogICAgICAgICAgICBpZiAoIWZpbHRlcnNbY29udGFpbmVySWRdKSBmaWx0ZXJzW2NvbnRhaW5lcklkXSA9IHt9OwoKICAgICAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgc2hvd1JvdyA9IHRydWU7CiAgICAgICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKHRoLCBjb2xJbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gdGgucXVlcnlTZWxlY3RvcignLmZpbHRlci1kcm9wZG93bi1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3Bkb3duKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWVzID0gQXJyYXkuZnJvbShkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJjaGVja2JveCJdOmNoZWNrZWQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoY2IgPT4gY2IudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSByb3cuY2VsbHNbY29sSW5kZXhdLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmxlbmd0aCA+IDAgJiYgIXNlbGVjdGVkVmFsdWVzLmluY2x1ZGVzKGNlbGxWYWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dSb3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSBzaG93Um93ID8gJycgOiAnbm9uZSc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2VsZWN0QWxsT3B0aW9ucyhvcHRpb25zRGl2LCBjb250YWluZXJJZCwgY29sSW5kZXgpIHsKICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IG9wdGlvbnNEaXYucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpOwogICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IHRydWUpOwogICAgICAgICAgICBhcHBseUZpbHRlcnMoY29udGFpbmVySWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXRGaWx0ZXJzKGNvbnRhaW5lcklkKSB7CiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7CiAgICAgICAgICAgIGlmICh0YWJsZSkgewogICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJyk7CiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHJvdy5zdHlsZS5kaXNwbGF5ID0gJycpOwogICAgICAgICAgICAgICAgZGVsZXRlIGZpbHRlcnNbY29udGFpbmVySWRdOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBjb25zdCBkcm9wZG93bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyLWRyb3Bkb3duLWNvbnRlbnQnKTsKICAgICAgICAgICAgZHJvcGRvd25zLmZvckVhY2goZHJvcGRvd24gPT4gewogICAgICAgICAgICAgICAgaWYgKCFkcm9wZG93bi5wYXJlbnRFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHsKICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyBNb2JpbGUgbWVudSBmdW5jdGlvbmFsaXR5CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zdCBtZW51QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1tZW51LWJ0bicpOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAobWVudUJ0bikgewogICAgICAgICAgICAgICAgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtbWVudS1vcGVuJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xvc2VzdCgnLm1vYmlsZS1tZW51LWJ0bicpICYmICFldmVudC50YXJnZXQuY2xvc2VzdCgnLm5hdi1saW5rcycpKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21vYmlsZS1tZW51LW9wZW4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgIAogICAgICAgICAgICAgICAgfSAgIGVsc2UgICAgICB7ICAgICAgIGFsZXJ0KCJUaGlzIEdTVCBSZWNvbmNpbGlhdGlvbiB0b29sIGlzIGZ1bGx5IHNlY3VyZWQgYnkgU3VtaXQgR2FyZy4gSWYgbm90IHdvcmtpbmcgb3IgZmFjZSBhbnkgcHJvYmxlbSBpbiBhY2Nlc3NpbmcgdGhlbiBjb250YWN0IHRvIG1lLiBOYW1lIC0gU3VtaXQgR2FyZywgUGguIE5vLiAtIDk3MTY4MDQ1MjAsIEVtYWlsIC0gU3VtaXRHYXJnMTAwMDAwQEdtYWlsLmNvbSAiKTsgICAgIH0gCiAgICAgICAgCiAgICAgICAgCiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg=="));
        document.close();
    </script>
</body>
</html>
